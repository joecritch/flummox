var Flummox=function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t.prototype.constructor.name}function s(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}var r=function(t){return t&&t.__esModule?t["default"]:t},a=function(t,e){var n=Object.create(t.prototype),i=t.apply(n,e);return null==i||"object"!=typeof i&&"function"!=typeof i?n:i},o=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},h=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=r(n(1)),p=r(n(2)),f=n(3).Dispatcher,l=r(n(4)),d=function(t){function e(){h(this,e),this.dispatcher=new f,this._stores={},this._actions={}}return c(e,t),o(e,{createStore:{value:function(t,e){for(var n=arguments.length,s=Array(n>2?n-2:0),r=2;n>r;r++)s[r-2]=arguments[r];if(!(e.prototype instanceof u)){var o=i(e);throw new Error("You've attempted to create a store from the class "+o+", which does not have the base Store class in its prototype chain. Make sure "+("you're using the `extends` keyword: `class "+o+" extends ")+"Store { ... }`")}if(this._stores.hasOwnProperty(t)&&this._stores[t])throw new Error("You've attempted to create multiple stores with key "+t+". Keys must be unique.");var c=a(e,s),h=this.dispatcher.register(c.handler.bind(c));return c._waitFor=this.waitFor.bind(this),c._token=h,c._getAllActionIds=this.getAllActionIds.bind(this),this._stores[t]=c,c}},getStore:{value:function(t){return this._stores.hasOwnProperty(t)?this._stores[t]:void 0}},createActions:{value:function(t,e){for(var n=arguments.length,s=Array(n>2?n-2:0),r=2;n>r;r++)s[r-2]=arguments[r];if(!(e.prototype instanceof p)&&e!==p){var o=i(e);throw new Error("You've attempted to create actions from the class "+o+", which does not have the base Actions class in its prototype chain. Make "+("sure you're using the `extends` keyword: `class "+o+" ")+"extends Actions { ... }`")}if(this._actions.hasOwnProperty(t)&&this._actions[t])throw new Error("You've attempted to create multiple actions with key "+t+". Keys must be unique.");var c=a(e,s);return c.dispatch=this.dispatch.bind(this),c.dispatchAsync=this.dispatchAsync.bind(this),this._actions[t]=c,c}},getActions:{value:function(t){return this._actions.hasOwnProperty(t)?this._actions[t]:void 0}},getActionIds:{value:function(t){var e=this.getActions(t);if(e)return e.getConstants()}},getAllActionIds:{value:function(){var t=[];for(var e in this._actions)if(this._actions.hasOwnProperty(e)){var n=this._actions[e].getConstants();t=t.concat(s(n))}return t}},dispatch:{value:function(t,e){this._dispatch({actionId:t,body:e})}},dispatchAsync:{value:function(t,e,n){var i=this,s={actionId:t,async:"begin"};return n&&(s.actionArgs=n),this._dispatch(s),e.then(function(e){return i._dispatch({actionId:t,body:e,async:"success"}),e},function(e){return i._dispatch({actionId:t,error:e,actionArgs:n,async:"failure"}),Promise.reject(e)})["catch"](function(t){return i.emit("error",t),Promise.reject(t)})}},_dispatch:{value:function(t){this.dispatcher.dispatch(t),this.emit("dispatch",t)}},waitFor:{value:function(t){Array.isArray(t)||(t=[t]);var e=function(t){return t instanceof u?t._token:t},n=t.map(e);this.dispatcher.waitFor(n)}},removeAllStoreListeners:{value:function(t){for(var e in this._stores)if(this._stores.hasOwnProperty(e)){var n=this._stores[e];n.removeAllListeners(t)}}},serialize:{value:function n(){var t={};for(var e in this._stores)if(this._stores.hasOwnProperty(e)){var i=this._stores[e],n=i.constructor.serialize;if("function"==typeof n){var s=n(i.state);if("string"!=typeof s){i.constructor.name}if(t[e]=s,"function"!=typeof i.constructor.deserialize){i.constructor.name}}}return JSON.stringify(t)}},deserialize:{value:function r(t){var e=void 0;try{e=JSON.parse(t)}catch(n){{this.constructor.name}}for(var i in this._stores)if(this._stores.hasOwnProperty(i)){var s=this._stores[i],r=s.constructor.deserialize;if("function"==typeof r){var a=e[i],o=r(a);if(s.replaceState(o),"function"!=typeof s.constructor.serialize){s.constructor.name}}}}}}),e}(l);e["default"]=d,d.prototype.getConstants=d.prototype.getActionIds,d.prototype.getAllConstants=d.prototype.getAllActionIds,d.prototype.dehydrate=d.prototype.serialize,d.prototype.hydrate=d.prototype.deserialize;var v=d;e.Flux=d,e.Flummox=v,e.Store=u,e.Actions=p},function(t,e,n){"use strict";function i(t){return"function"==typeof t?t._id:t}var s=function(t){return t&&t.__esModule?t["default"]:t},r=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=s(n(4)),h=s(n(6)),u=function(t){function e(){o(this,e),this.state=null,this._handlers={},this._asyncHandlers={},this._catchAllHandlers=[],this._catchAllAsyncHandlers={begin:[],success:[],failure:[]}}return a(e,t),r(e,{setState:{value:function(t){if("function"==typeof t){var e=this._isHandlingDispatch?this._pendingState:this.state;t=t(e)}this._isHandlingDispatch?(this._pendingState=this._assignState(this._pendingState,t),this._emitChangeAfterHandlingDispatch=!0):(this.state=this._assignState(this.state,t),this.emit("change"))}},replaceState:{value:function(t){this._isHandlingDispatch?(this._pendingState=this._assignState(void 0,t),this._emitChangeAfterHandlingDispatch=!0):(this.state=this._assignState(void 0,t),this.emit("change"))}},getStateAsObject:{value:function(){return this.state}},_assignState:{value:function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return(this.constructor.assignState||e.assignState).apply(void 0,n)}},forceUpdate:{value:function(){this._isHandlingDispatch?this._emitChangeAfterHandlingDispatch=!0:this.emit("change")}},register:{value:function(t,e){t=i(t),"function"==typeof e&&(this._handlers[t]=e.bind(this))}},registerAsync:{value:function(t,e,n,s){t=i(t);var r=this._bindAsyncHandlers({begin:e,success:n,failure:s});this._asyncHandlers[t]=r}},registerAll:{value:function(t){"function"==typeof t&&this._catchAllHandlers.push(t.bind(this))}},registerAllAsync:{value:function(t,e,n){var i=this,s=this._bindAsyncHandlers({begin:t,success:e,failure:n});Object.keys(s).forEach(function(t){i._catchAllAsyncHandlers[t].push(s[t])})}},_bindAsyncHandlers:{value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"function"==typeof n?t[e]=n.bind(this):delete t[e]}return t}},waitFor:{value:function(t){this._waitFor(t)}},handler:{value:function(t){var e=t.body,n=t.actionId,i=t.async,s=t.actionArgs,r=t.error,a=this._catchAllHandlers,o=this._handlers[n],c=this._catchAllAsyncHandlers[i],h=this._asyncHandlers[n]&&this._asyncHandlers[n][i];if(i){var u=c.concat([h]);switch(i){case"begin":return void this._performHandler(u,s);case"failure":return void this._performHandler(u,[r.concat(s)]);case"success":return void this._performHandler(c.concat([h||o]),[e]);default:return}}this._performHandler(a.concat([o]),[e])}},_performHandler:{value:function(t,e){this._isHandlingDispatch=!0,this._pendingState=this._assignState(void 0,this.state),this._emitChangeAfterHandlingDispatch=!1;try{this._performHandlers(t,e)}finally{this._emitChangeAfterHandlingDispatch&&(this.state=this._pendingState,this.emit("change")),this._isHandlingDispatch=!1,this._pendingState=void 0,this._emitChangeAfterHandlingDispatch=!1}}},_performHandlers:{value:function(t,e){t.forEach(function(t){"function"==typeof t&&t.apply(this,e)}.bind(this))}}},{assignState:{value:function(t,e){return h({},t,e)}}}),e}(c);t.exports=u},function(t,e,n){"use strict";function i(t){return t&&"function"==typeof t.then}var s=function(t){return t&&t.__esModule?t["default"]:t},r=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=s(n(7)),c=function(){function t(){a(this,t),this._baseId=o();for(var e=this._getActionMethodNames(),n=0;n<e.length;n++){var i=e[n];this._wrapAction(i)}this.getConstants=this.getActionIds}return r(t,{getActionIds:{value:function(){var t=this;return this._getActionMethodNames().reduce(function(e,n){return e[n]=t[n]._id,e},{})}},_getActionMethodNames:{value:function(){var t=this;return Object.getOwnPropertyNames(this.constructor.prototype).filter(function(e){return"constructor"!==e&&"function"==typeof t[e]})}},_wrapAction:{value:function(t){var e=this,n=this[t],s=this._createActionId(t),r=function(){for(var r=arguments.length,a=Array(r),o=0;r>o;o++)a[o]=arguments[o];var c=n.apply(e,a);if(i(c)){var h=c;e._dispatchAsync(s,h,a,t)["catch"](function(){})}else e._dispatch(s,c,a,t);return c};r._id=s,this[t]=r}},_createActionId:{value:function(t){return""+this._baseId+"-"+t}},_dispatch:{value:function(t,e,n,i){return"function"==typeof this.dispatch&&"undefined"!=typeof e&&this.dispatch(t,e,n),e}},_dispatchAsync:{value:function(t,e,n,i){return"function"==typeof this.dispatchAsync?this.dispatchAsync(t,e,n):e}}}),t}();t.exports=c},function(t,e,n){t.exports.Dispatcher=n(5)},function(t){"use strict";function e(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function n(){}n.prototype._events=void 0,n.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,i=new Array(n);n>e;e++)i[e]=this._events[t][e].fn;return i},n.prototype.emit=function(t,e,n,i,s,r){if(!this._events||!this._events[t])return!1;var a,o,c=this._events[t],h=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,s),!0;case 6:return c.fn.call(c.context,e,n,i,s,r),!0}for(o=1,a=new Array(h-1);h>o;o++)a[o-1]=arguments[o];c.fn.apply(c.context,a)}else{var u,p=c.length;for(o=0;p>o;o++)switch(c[o].once&&this.removeListener(t,c[o].fn,!0),h){case 1:c[o].fn.call(c[o].context);break;case 2:c[o].fn.call(c[o].context,e);break;case 3:c[o].fn.call(c[o].context,e,n);break;default:if(!a)for(u=1,a=new Array(h-1);h>u;u++)a[u-1]=arguments[u];c[o].fn.apply(c[o].context,a)}}return!0},n.prototype.on=function(t,n,i){var s=new e(n,i||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},n.prototype.once=function(t,n,i){var s=new e(n,i||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},n.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var i=this._events[t],s=[];if(e&&(i.fn&&(i.fn!==e||n&&!i.once)&&s.push(i),!i.fn))for(var r=0,a=i.length;a>r;r++)(i[r].fn!==e||n&&!i[r].once)&&s.push(i[r]);return s.length?this._events[t]=1===s.length?s[0]:s:delete this._events[t],this},n.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.EventEmitter=n,n.EventEmitter2=n,n.EventEmitter3=n,t.exports=n},function(t,e,n){"use strict";function i(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var s=n(8),r=1,a="ID_";i.prototype.register=function(t){var e=a+r++;return this.$Dispatcher_callbacks[e]=t,e},i.prototype.unregister=function(t){s(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},i.prototype.waitFor=function(t){s(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?s(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(s(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},i.prototype.dispatch=function(t){s(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},i.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},i.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},i.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},i.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},t.exports=i},function(t){"use strict";function e(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t){for(var n,i,s=e(t),r=1;r<arguments.length;r++){n=arguments[r],i=Object.keys(Object(n));for(var a=0;a<i.length;a++)s[i[a]]=n[i[a]]}return s}},function(t){"use strict";var e=0,n=t.exports=function(t){t=t||{};var n=t.prefix,i=t.suffix,s=++e*(t.multiplier||1);return null==n&&(n=""),null==i&&(i=""),String(n)+s+String(i)};n.reset=function(){return e=0}},function(t){"use strict";var e=function(t,e,n,i,s,r,a,o){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,i,s,r,a,o],u=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return h[u++]}))}throw c.framesToPop=1,c}};t.exports=e}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmx1bW1veC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDZkOTYyOGJhMzFhNDY5ZWM5N2EzIiwid2VicGFjazovLy8uL3NyYy9GbHV4LmpzIiwid2VicGFjazovLy8uL3NyYy9TdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vZmx1eC9saWIvRGlzcGF0Y2hlci5qcyIsIndlYnBhY2s6Ly8vLi9+L29iamVjdC1hc3NpZ24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi91bmlxdWVpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZsdXgvbGliL2ludmFyaWFudC5qcyJdLCJuYW1lcyI6WyJGbHVtbW94IiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiZ2V0Q2xhc3NOYW1lIiwiQ2xhc3MiLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJnZXRWYWx1ZXMiLCJvYmplY3QiLCJ2YWx1ZXMiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJfaW50ZXJvcFJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwiX2FwcGx5Q29uc3RydWN0b3IiLCJDb25zdHJ1Y3RvciIsImFyZ3MiLCJpbnN0YW5jZSIsIk9iamVjdCIsImNyZWF0ZSIsInJlc3VsdCIsImFwcGx5IiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwicHJvcCIsImNvbmZpZ3VyYWJsZSIsInZhbHVlIiwid3JpdGFibGUiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJUeXBlRXJyb3IiLCJlbnVtZXJhYmxlIiwiX19wcm90b19fIiwiX2NsYXNzQ2FsbENoZWNrIiwiZGVmaW5lUHJvcGVydHkiLCJTdG9yZSIsIkFjdGlvbnMiLCJEaXNwYXRjaGVyIiwiRXZlbnRFbWl0dGVyIiwiRmx1eCIsIl9FdmVudEVtaXR0ZXIiLCJ0aGlzIiwiZGlzcGF0Y2hlciIsIl9zdG9yZXMiLCJfYWN0aW9ucyIsImNyZWF0ZVN0b3JlIiwiX1N0b3JlIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNvbnN0cnVjdG9yQXJncyIsIkFycmF5IiwiX2tleSIsImNsYXNzTmFtZSIsIkVycm9yIiwic3RvcmUiLCJ0b2tlbiIsInJlZ2lzdGVyIiwiaGFuZGxlciIsImJpbmQiLCJfd2FpdEZvciIsIndhaXRGb3IiLCJfdG9rZW4iLCJfZ2V0QWxsQWN0aW9uSWRzIiwiZ2V0QWxsQWN0aW9uSWRzIiwiZ2V0U3RvcmUiLCJ1bmRlZmluZWQiLCJjcmVhdGVBY3Rpb25zIiwiX0FjdGlvbnMiLCJhY3Rpb25zIiwiZGlzcGF0Y2giLCJkaXNwYXRjaEFzeW5jIiwiZ2V0QWN0aW9ucyIsImdldEFjdGlvbklkcyIsImdldENvbnN0YW50cyIsImFjdGlvbklkcyIsImFjdGlvbkNvbnN0YW50cyIsImNvbmNhdCIsImFjdGlvbklkIiwiYm9keSIsIl9kaXNwYXRjaCIsInByb21pc2UiLCJhY3Rpb25BcmdzIiwiX3RoaXMiLCJwYXlsb2FkIiwiYXN5bmMiLCJ0aGVuIiwiZXJyb3IiLCJQcm9taXNlIiwicmVqZWN0IiwiZW1pdCIsInRva2Vuc09yU3RvcmVzIiwiaXNBcnJheSIsImVuc3VyZUlzVG9rZW4iLCJ0b2tlbk9yU3RvcmUiLCJ0b2tlbnMiLCJtYXAiLCJyZW1vdmVBbGxTdG9yZUxpc3RlbmVycyIsImV2ZW50IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwic2VyaWFsaXplIiwic3RhdGVUcmVlIiwic2VyaWFsaXplZFN0b3JlU3RhdGUiLCJzdGF0ZSIsImRlc2VyaWFsaXplIiwiSlNPTiIsInN0cmluZ2lmeSIsInNlcmlhbGl6ZWRTdGF0ZSIsInN0YXRlTWFwIiwicGFyc2UiLCJzdG9yZVN0YXRlU3RyaW5nIiwic3RvcmVTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImdldEFsbENvbnN0YW50cyIsImRlaHlkcmF0ZSIsImh5ZHJhdGUiLCJlbnN1cmVBY3Rpb25JZCIsImFjdGlvbk9yQWN0aW9uSWQiLCJfaWQiLCJhc3NpZ24iLCJfaGFuZGxlcnMiLCJfYXN5bmNIYW5kbGVycyIsIl9jYXRjaEFsbEhhbmRsZXJzIiwiX2NhdGNoQWxsQXN5bmNIYW5kbGVycyIsImJlZ2luIiwic3VjY2VzcyIsImZhaWx1cmUiLCJzZXRTdGF0ZSIsIm5ld1N0YXRlIiwicHJldlN0YXRlIiwiX2lzSGFuZGxpbmdEaXNwYXRjaCIsIl9wZW5kaW5nU3RhdGUiLCJfYXNzaWduU3RhdGUiLCJfZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCIsImdldFN0YXRlQXNPYmplY3QiLCJhc3NpZ25TdGF0ZSIsImZvcmNlVXBkYXRlIiwicmVnaXN0ZXJBc3luYyIsImJlZ2luSGFuZGxlciIsInN1Y2Nlc3NIYW5kbGVyIiwiZmFpbHVyZUhhbmRsZXIiLCJhc3luY0hhbmRsZXJzIiwiX2JpbmRBc3luY0hhbmRsZXJzIiwicmVnaXN0ZXJBbGwiLCJyZWdpc3RlckFsbEFzeW5jIiwia2V5cyIsImZvckVhY2giLCJfYXN5bmMiLCJfYWxsSGFuZGxlcnMiLCJfaGFuZGxlciIsIl9hbGxBc3luY0hhbmRsZXJzIiwiX2FzeW5jSGFuZGxlciIsImJlZ2luT3JGYWlsdXJlSGFuZGxlcnMiLCJfcGVyZm9ybUhhbmRsZXIiLCJfcGVyZm9ybUhhbmRsZXJzIiwib2xkU3RhdGUiLCJpc1Byb21pc2UiLCJ1bmlxdWVJZCIsIl9iYXNlSWQiLCJtZXRob2ROYW1lcyIsIl9nZXRBY3Rpb25NZXRob2ROYW1lcyIsImkiLCJtZXRob2ROYW1lIiwiX3dyYXBBY3Rpb24iLCJyZWR1Y2UiLCJhY3Rpb25OYW1lIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZpbHRlciIsIm9yaWdpbmFsTWV0aG9kIiwiX2NyZWF0ZUFjdGlvbklkIiwiYWN0aW9uIiwiX2Rpc3BhdGNoQXN5bmMiLCJFRSIsImZuIiwiY29udGV4dCIsIm9uY2UiLCJfZXZlbnRzIiwibGlzdGVuZXJzIiwibCIsImVlIiwiYTEiLCJhMiIsImEzIiwiYTQiLCJhNSIsImxlbiIsInJlbW92ZUxpc3RlbmVyIiwiaiIsIm9uIiwibGlzdGVuZXIiLCJldmVudHMiLCJvZmYiLCJhZGRMaXN0ZW5lciIsInNldE1heExpc3RlbmVycyIsIkV2ZW50RW1pdHRlcjIiLCJFdmVudEVtaXR0ZXIzIiwiJERpc3BhdGNoZXJfY2FsbGJhY2tzIiwiJERpc3BhdGNoZXJfaXNQZW5kaW5nIiwiJERpc3BhdGNoZXJfaXNIYW5kbGVkIiwiJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyIsIiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkIiwiaW52YXJpYW50IiwiX2xhc3RJRCIsIl9wcmVmaXgiLCJjYWxsYmFjayIsInVucmVnaXN0ZXIiLCJpZHMiLCJpaSIsIiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrIiwiJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZyIsIiREaXNwYXRjaGVyX3N0b3BEaXNwYXRjaGluZyIsImlzRGlzcGF0Y2hpbmciLCJUb09iamVjdCIsInZhbCIsImZyb20iLCJ0byIsInMiLCJjb3VudCIsIm9wdGlvbnMiLCJwcmVmaXgiLCJzdWZmaXgiLCJtdWx0aXBsaWVyIiwiU3RyaW5nIiwicmVzZXQiLCJjb25kaXRpb24iLCJmb3JtYXQiLCJhIiwiYiIsImQiLCJlIiwiZiIsImFyZ0luZGV4IiwicmVwbGFjZSIsImZyYW1lc1RvUG9wIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxTQUNLLFNBQVVDLEdDR25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFE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dUIsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTFPLEVBQUEyTyxFQUFBQyxFQUFBQyxHQU9BLElBQUFOLEVBQUEsQ0FDQSxHQUFBekksRUFDQSxJQUFBckIsU0FBQStKLEVBQ0ExSSxFQUFBLEdBQUFqQyxPQUNBLHFJQUdLLENBQ0wsR0FBQTNDLElBQUF1TixFQUFBQyxFQUFBMU8sRUFBQTJPLEVBQUFDLEVBQUFDLEdBQ0FDLEVBQUEsQ0FDQWhKLEdBQUEsR0FBQWpDLE9BQ0Esd0JBQ0EySyxFQUFBTyxRQUFBLGlCQUEwQyxNQUFBN04sR0FBQTROLFFBSzFDLEtBREFoSixHQUFBa0osWUFBQSxFQUNBbEosR0FJQW5HLEdBQUFELFFBQUFzTiIsImZpbGUiOiJmbHVtbW94Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBGbHVtbW94ID1cbi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG5cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG5cblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2FwcGx5Q29uc3RydWN0b3IgPSBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGFyZ3MpIHsgdmFyIGluc3RhbmNlID0gT2JqZWN0LmNyZWF0ZShDb25zdHJ1Y3Rvci5wcm90b3R5cGUpOyB2YXIgcmVzdWx0ID0gQ29uc3RydWN0b3IuYXBwbHkoaW5zdGFuY2UsIGFyZ3MpOyByZXR1cm4gcmVzdWx0ICE9IG51bGwgJiYgKHR5cGVvZiByZXN1bHQgPT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgcmVzdWx0ID09IFwiZnVuY3Rpb25cIikgPyByZXN1bHQgOiBpbnN0YW5jZTsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyoqXG5cdCAqIEZsdXhcblx0ICpcblx0ICogVGhlIG1haW4gRmx1eCBjbGFzcy5cblx0ICovXG5cblx0dmFyIFN0b3JlID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBBY3Rpb25zID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMikpO1xuXG5cdHZhciBEaXNwYXRjaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5EaXNwYXRjaGVyO1xuXG5cdHZhciBFdmVudEVtaXR0ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XG5cblx0dmFyIEZsdXggPSAoZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcblx0ICBmdW5jdGlvbiBGbHV4KCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZsdXgpO1xuXG5cdCAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuXG5cdCAgICB0aGlzLl9zdG9yZXMgPSB7fTtcblx0ICAgIHRoaXMuX2FjdGlvbnMgPSB7fTtcblx0ICB9XG5cblx0ICBfaW5oZXJpdHMoRmx1eCwgX0V2ZW50RW1pdHRlcik7XG5cblx0ICBfY3JlYXRlQ2xhc3MoRmx1eCwge1xuXHQgICAgY3JlYXRlU3RvcmU6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVN0b3JlKGtleSwgX1N0b3JlKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNvbnN0cnVjdG9yQXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICAgIGNvbnN0cnVjdG9yQXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKCEoX1N0b3JlLnByb3RvdHlwZSBpbnN0YW5jZW9mIFN0b3JlKSkge1xuXHQgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGdldENsYXNzTmFtZShfU3RvcmUpO1xuXG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBhIHN0b3JlIGZyb20gdGhlIGNsYXNzIFwiICsgY2xhc3NOYW1lICsgXCIsIHdoaWNoIFwiICsgXCJkb2VzIG5vdCBoYXZlIHRoZSBiYXNlIFN0b3JlIGNsYXNzIGluIGl0cyBwcm90b3R5cGUgY2hhaW4uIE1ha2Ugc3VyZSBcIiArIChcInlvdSdyZSB1c2luZyB0aGUgYGV4dGVuZHNgIGtleXdvcmQ6IGBjbGFzcyBcIiArIGNsYXNzTmFtZSArIFwiIGV4dGVuZHMgXCIpICsgXCJTdG9yZSB7IC4uLiB9YFwiKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAodGhpcy5fc3RvcmVzLmhhc093blByb3BlcnR5KGtleSkgJiYgdGhpcy5fc3RvcmVzW2tleV0pIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIG11bHRpcGxlIHN0b3JlcyB3aXRoIGtleSBcIiArIGtleSArIFwiLiBLZXlzIG11c3QgXCIgKyBcImJlIHVuaXF1ZS5cIik7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdmFyIHN0b3JlID0gX2FwcGx5Q29uc3RydWN0b3IoX1N0b3JlLCBjb25zdHJ1Y3RvckFyZ3MpO1xuXHQgICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZGlzcGF0Y2hlci5yZWdpc3RlcihzdG9yZS5oYW5kbGVyLmJpbmQoc3RvcmUpKTtcblxuXHQgICAgICAgIHN0b3JlLl93YWl0Rm9yID0gdGhpcy53YWl0Rm9yLmJpbmQodGhpcyk7XG5cdCAgICAgICAgc3RvcmUuX3Rva2VuID0gdG9rZW47XG5cdCAgICAgICAgc3RvcmUuX2dldEFsbEFjdGlvbklkcyA9IHRoaXMuZ2V0QWxsQWN0aW9uSWRzLmJpbmQodGhpcyk7XG5cblx0ICAgICAgICB0aGlzLl9zdG9yZXNba2V5XSA9IHN0b3JlO1xuXG5cdCAgICAgICAgcmV0dXJuIHN0b3JlO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZ2V0U3RvcmU6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0b3JlKGtleSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9zdG9yZXMuaGFzT3duUHJvcGVydHkoa2V5KSA/IHRoaXMuX3N0b3Jlc1trZXldIDogdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgY3JlYXRlQWN0aW9uczoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQWN0aW9ucyhrZXksIF9BY3Rpb25zKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNvbnN0cnVjdG9yQXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICAgIGNvbnN0cnVjdG9yQXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKCEoX0FjdGlvbnMucHJvdG90eXBlIGluc3RhbmNlb2YgQWN0aW9ucykgJiYgX0FjdGlvbnMgIT09IEFjdGlvbnMpIHtcblx0ICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoX0FjdGlvbnMpO1xuXG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBhY3Rpb25zIGZyb20gdGhlIGNsYXNzIFwiICsgY2xhc3NOYW1lICsgXCIsIHdoaWNoIFwiICsgXCJkb2VzIG5vdCBoYXZlIHRoZSBiYXNlIEFjdGlvbnMgY2xhc3MgaW4gaXRzIHByb3RvdHlwZSBjaGFpbi4gTWFrZSBcIiArIChcInN1cmUgeW91J3JlIHVzaW5nIHRoZSBgZXh0ZW5kc2Aga2V5d29yZDogYGNsYXNzIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpICsgXCJleHRlbmRzIEFjdGlvbnMgeyAuLi4gfWBcIik7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHRoaXMuX2FjdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB0aGlzLl9hY3Rpb25zW2tleV0pIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIG11bHRpcGxlIGFjdGlvbnMgd2l0aCBrZXkgXCIgKyBrZXkgKyBcIi4gS2V5cyBcIiArIFwibXVzdCBiZSB1bmlxdWUuXCIpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciBhY3Rpb25zID0gX2FwcGx5Q29uc3RydWN0b3IoX0FjdGlvbnMsIGNvbnN0cnVjdG9yQXJncyk7XG5cdCAgICAgICAgYWN0aW9ucy5kaXNwYXRjaCA9IHRoaXMuZGlzcGF0Y2guYmluZCh0aGlzKTtcblx0ICAgICAgICBhY3Rpb25zLmRpc3BhdGNoQXN5bmMgPSB0aGlzLmRpc3BhdGNoQXN5bmMuYmluZCh0aGlzKTtcblxuXHQgICAgICAgIHRoaXMuX2FjdGlvbnNba2V5XSA9IGFjdGlvbnM7XG5cblx0ICAgICAgICByZXR1cm4gYWN0aW9ucztcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGdldEFjdGlvbnM6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGlvbnMoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSA/IHRoaXMuX2FjdGlvbnNba2V5XSA6IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGdldEFjdGlvbklkczoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWN0aW9uSWRzKGtleSkge1xuXHQgICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5nZXRBY3Rpb25zKGtleSk7XG5cblx0ICAgICAgICBpZiAoIWFjdGlvbnMpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9cmV0dXJuIGFjdGlvbnMuZ2V0Q29uc3RhbnRzKCk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBnZXRBbGxBY3Rpb25JZHM6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbEFjdGlvbklkcygpIHtcblx0ICAgICAgICB2YXIgYWN0aW9uSWRzID0gW107XG5cblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fYWN0aW9ucykge1xuXHQgICAgICAgICAgaWYgKCF0aGlzLl9hY3Rpb25zLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuXG5cdCAgICAgICAgICB2YXIgYWN0aW9uQ29uc3RhbnRzID0gdGhpcy5fYWN0aW9uc1trZXldLmdldENvbnN0YW50cygpO1xuXG5cdCAgICAgICAgICBhY3Rpb25JZHMgPSBhY3Rpb25JZHMuY29uY2F0KGdldFZhbHVlcyhhY3Rpb25Db25zdGFudHMpKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gYWN0aW9uSWRzO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZGlzcGF0Y2g6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbklkLCBib2R5KSB7XG5cdCAgICAgICAgdGhpcy5fZGlzcGF0Y2goeyBhY3Rpb25JZDogYWN0aW9uSWQsIGJvZHk6IGJvZHkgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBkaXNwYXRjaEFzeW5jOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaEFzeW5jKGFjdGlvbklkLCBwcm9taXNlLCBhY3Rpb25BcmdzKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgIHZhciBwYXlsb2FkID0ge1xuXHQgICAgICAgICAgYWN0aW9uSWQ6IGFjdGlvbklkLFxuXHQgICAgICAgICAgYXN5bmM6IFwiYmVnaW5cIiB9O1xuXG5cdCAgICAgICAgaWYgKGFjdGlvbkFyZ3MpIHBheWxvYWQuYWN0aW9uQXJncyA9IGFjdGlvbkFyZ3M7XG5cblx0ICAgICAgICB0aGlzLl9kaXNwYXRjaChwYXlsb2FkKTtcblxuXHQgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGJvZHkpIHtcblx0ICAgICAgICAgIF90aGlzLl9kaXNwYXRjaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbklkOiBhY3Rpb25JZCxcblx0ICAgICAgICAgICAgYm9keTogYm9keSxcblx0ICAgICAgICAgICAgYXN5bmM6IFwic3VjY2Vzc1wiXG5cdCAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgcmV0dXJuIGJvZHk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgICBfdGhpcy5fZGlzcGF0Y2goe1xuXHQgICAgICAgICAgICBhY3Rpb25JZDogYWN0aW9uSWQsXG5cdCAgICAgICAgICAgIGVycm9yOiBlcnJvcixcblx0ICAgICAgICAgICAgYWN0aW9uQXJnczogYWN0aW9uQXJncyxcblx0ICAgICAgICAgICAgYXN5bmM6IFwiZmFpbHVyZVwiIH0pO1xuXG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuXHQgICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgICBfdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xuXG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgX2Rpc3BhdGNoOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlzcGF0Y2gocGF5bG9hZCkge1xuXHQgICAgICAgIHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaChwYXlsb2FkKTtcblx0ICAgICAgICB0aGlzLmVtaXQoXCJkaXNwYXRjaFwiLCBwYXlsb2FkKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHdhaXRGb3I6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdhaXRGb3IodG9rZW5zT3JTdG9yZXMpIHtcblxuXHQgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0b2tlbnNPclN0b3JlcykpIHRva2Vuc09yU3RvcmVzID0gW3Rva2Vuc09yU3RvcmVzXTtcblxuXHQgICAgICAgIHZhciBlbnN1cmVJc1Rva2VuID0gZnVuY3Rpb24gKHRva2VuT3JTdG9yZSkge1xuXHQgICAgICAgICAgcmV0dXJuIHRva2VuT3JTdG9yZSBpbnN0YW5jZW9mIFN0b3JlID8gdG9rZW5PclN0b3JlLl90b2tlbiA6IHRva2VuT3JTdG9yZTtcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFyIHRva2VucyA9IHRva2Vuc09yU3RvcmVzLm1hcChlbnN1cmVJc1Rva2VuKTtcblxuXHQgICAgICAgIHRoaXMuZGlzcGF0Y2hlci53YWl0Rm9yKHRva2Vucyk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICByZW1vdmVBbGxTdG9yZUxpc3RlbmVyczoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsU3RvcmVMaXN0ZW5lcnMoZXZlbnQpIHtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fc3RvcmVzKSB7XG5cdCAgICAgICAgICBpZiAoIXRoaXMuX3N0b3Jlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuXHQgICAgICAgICAgdmFyIHN0b3JlID0gdGhpcy5fc3RvcmVzW2tleV07XG5cblx0ICAgICAgICAgIHN0b3JlLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgc2VyaWFsaXplOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXJpYWxpemUoKSB7XG5cdCAgICAgICAgdmFyIHN0YXRlVHJlZSA9IHt9O1xuXG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3N0b3Jlcykge1xuXHQgICAgICAgICAgaWYgKCF0aGlzLl9zdG9yZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cblx0ICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXMuX3N0b3Jlc1trZXldO1xuXG5cdCAgICAgICAgICB2YXIgc2VyaWFsaXplID0gc3RvcmUuY29uc3RydWN0b3Iuc2VyaWFsaXplO1xuXG5cdCAgICAgICAgICBpZiAodHlwZW9mIHNlcmlhbGl6ZSAhPT0gXCJmdW5jdGlvblwiKSBjb250aW51ZTtcblxuXHQgICAgICAgICAgdmFyIHNlcmlhbGl6ZWRTdG9yZVN0YXRlID0gc2VyaWFsaXplKHN0b3JlLnN0YXRlKTtcblxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBzZXJpYWxpemVkU3RvcmVTdGF0ZSAhPT0gXCJzdHJpbmdcIikge1xuXHQgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gc3RvcmUuY29uc3RydWN0b3IubmFtZTtcblxuXHQgICAgICAgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgc3RvcmUgd2l0aCBrZXkgJ1wiICsga2V5ICsgXCInIHdhcyBub3Qgc2VyaWFsaXplZCBiZWNhdXNlIHRoZSBzdGF0aWMgXCIgKyAoXCJtZXRob2QgYFwiICsgY2xhc3NOYW1lICsgXCIuc2VyaWFsaXplKClgIHJldHVybmVkIGEgbm9uLXN0cmluZyB3aXRoIHR5cGUgXCIpICsgKFwiJ1wiICsgdHlwZW9mIHNlcmlhbGl6ZWRTdG9yZVN0YXRlICsgXCInLlwiKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblxuXHQgICAgICAgICAgc3RhdGVUcmVlW2tleV0gPSBzZXJpYWxpemVkU3RvcmVTdGF0ZTtcblxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZS5jb25zdHJ1Y3Rvci5kZXNlcmlhbGl6ZSAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBzdG9yZS5jb25zdHJ1Y3Rvci5uYW1lO1xuXG5cdCAgICAgICAgICAgIGlmIChmYWxzZSkge1xuXHQgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBjbGFzcyBgXCIgKyBjbGFzc05hbWUgKyBcImAgaGFzIGEgYHNlcmlhbGl6ZSgpYCBtZXRob2QsIGJ1dCBubyBcIiArIFwiY29ycmVzcG9uZGluZyBgZGVzZXJpYWxpemUoKWAgbWV0aG9kLlwiKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdGF0ZVRyZWUpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZGVzZXJpYWxpemU6IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWRTdGF0ZSkge1xuXHQgICAgICAgIHZhciBzdGF0ZU1hcCA9IHVuZGVmaW5lZDtcblxuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBzdGF0ZU1hcCA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZFN0YXRlKTtcblx0ICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuXHQgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcblxuXHQgICAgICAgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgcGFzc2VkIHRvIGBcIiArIGNsYXNzTmFtZSArIFwiI2Rlc2VyaWFsaXplKClgOiBcIiArIChcIlwiICsgc2VyaWFsaXplZFN0YXRlKSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3N0b3Jlcykge1xuXHQgICAgICAgICAgaWYgKCF0aGlzLl9zdG9yZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cblx0ICAgICAgICAgIHZhciBzdG9yZSA9IHRoaXMuX3N0b3Jlc1trZXldO1xuXG5cdCAgICAgICAgICB2YXIgZGVzZXJpYWxpemUgPSBzdG9yZS5jb25zdHJ1Y3Rvci5kZXNlcmlhbGl6ZTtcblxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBkZXNlcmlhbGl6ZSAhPT0gXCJmdW5jdGlvblwiKSBjb250aW51ZTtcblxuXHQgICAgICAgICAgdmFyIHN0b3JlU3RhdGVTdHJpbmcgPSBzdGF0ZU1hcFtrZXldO1xuXHQgICAgICAgICAgdmFyIHN0b3JlU3RhdGUgPSBkZXNlcmlhbGl6ZShzdG9yZVN0YXRlU3RyaW5nKTtcblxuXHQgICAgICAgICAgc3RvcmUucmVwbGFjZVN0YXRlKHN0b3JlU3RhdGUpO1xuXG5cdCAgICAgICAgICBpZiAodHlwZW9mIHN0b3JlLmNvbnN0cnVjdG9yLnNlcmlhbGl6ZSAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBzdG9yZS5jb25zdHJ1Y3Rvci5uYW1lO1xuXG5cdCAgICAgICAgICAgIGlmIChmYWxzZSkge1xuXHQgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBjbGFzcyBgXCIgKyBjbGFzc05hbWUgKyBcImAgaGFzIGEgYGRlc2VyaWFsaXplKClgIG1ldGhvZCwgYnV0IG5vIFwiICsgXCJjb3JyZXNwb25kaW5nIGBzZXJpYWxpemUoKWAgbWV0aG9kLlwiKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXG5cdCAgcmV0dXJuIEZsdXg7XG5cdH0pKEV2ZW50RW1pdHRlcik7XG5cblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBGbHV4O1xuXG5cdC8vIEFsaWFzZXNcblx0Rmx1eC5wcm90b3R5cGUuZ2V0Q29uc3RhbnRzID0gRmx1eC5wcm90b3R5cGUuZ2V0QWN0aW9uSWRzO1xuXHRGbHV4LnByb3RvdHlwZS5nZXRBbGxDb25zdGFudHMgPSBGbHV4LnByb3RvdHlwZS5nZXRBbGxBY3Rpb25JZHM7XG5cdEZsdXgucHJvdG90eXBlLmRlaHlkcmF0ZSA9IEZsdXgucHJvdG90eXBlLnNlcmlhbGl6ZTtcblx0Rmx1eC5wcm90b3R5cGUuaHlkcmF0ZSA9IEZsdXgucHJvdG90eXBlLmRlc2VyaWFsaXplO1xuXG5cdGZ1bmN0aW9uIGdldENsYXNzTmFtZShDbGFzcykge1xuXHQgIHJldHVybiBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFZhbHVlcyhvYmplY3QpIHtcblx0ICB2YXIgdmFsdWVzID0gW107XG5cblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG5cdCAgICBpZiAoIW9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuXHQgICAgdmFsdWVzLnB1c2gob2JqZWN0W2tleV0pO1xuXHQgIH1cblxuXHQgIHJldHVybiB2YWx1ZXM7XG5cdH1cblxuXHR2YXIgRmx1bW1veCA9IEZsdXg7XG5cblx0ZXhwb3J0cy5GbHV4ID0gRmx1eDtcblx0ZXhwb3J0cy5GbHVtbW94ID0gRmx1bW1veDtcblx0ZXhwb3J0cy5TdG9yZSA9IFN0b3JlO1xuXHRleHBvcnRzLkFjdGlvbnMgPSBBY3Rpb25zO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0LyoqXG5cdCAqIFN0b3JlXG5cdCAqXG5cdCAqIFN0b3JlcyBob2xkIGFwcGxpY2F0aW9uIHN0YXRlLiBUaGV5IHJlc3BvbmQgdG8gYWN0aW9ucyBzZW50IGJ5IHRoZSBkaXNwYXRjaGVyXG5cdCAqIGFuZCBicm9hZGNhc3QgY2hhbmdlIGV2ZW50cyB0byBsaXN0ZW5lcnMsIHNvIHRoZXkgY2FuIGdyYWIgdGhlIGxhdGVzdCBkYXRhLlxuXHQgKiBUaGUga2V5IHRoaW5nIHRvIHJlbWVtYmVyIGlzIHRoYXQgdGhlIG9ubHkgd2F5IHN0b3JlcyByZWNlaXZlIGluZm9ybWF0aW9uXG5cdCAqIGZyb20gdGhlIG91dHNpZGUgd29ybGQgaXMgdmlhIHRoZSBkaXNwYXRjaGVyLlxuXHQgKi9cblxuXHR2YXIgRXZlbnRFbWl0dGVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNCkpO1xuXG5cdHZhciBhc3NpZ24gPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cblx0dmFyIFN0b3JlID0gKGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG5cblx0ICAvKipcblx0ICAgKiBTdG9yZXMgYXJlIGluaXRpYWxpemVkIHdpdGggYSByZWZlcmVuY2Vcblx0ICAgKiBAdHlwZSB7T2JqZWN0fVxuXHQgICAqL1xuXG5cdCAgZnVuY3Rpb24gU3RvcmUoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmUpO1xuXG5cdCAgICB0aGlzLnN0YXRlID0gbnVsbDtcblxuXHQgICAgdGhpcy5faGFuZGxlcnMgPSB7fTtcblx0ICAgIHRoaXMuX2FzeW5jSGFuZGxlcnMgPSB7fTtcblx0ICAgIHRoaXMuX2NhdGNoQWxsSGFuZGxlcnMgPSBbXTtcblx0ICAgIHRoaXMuX2NhdGNoQWxsQXN5bmNIYW5kbGVycyA9IHtcblx0ICAgICAgYmVnaW46IFtdLFxuXHQgICAgICBzdWNjZXNzOiBbXSxcblx0ICAgICAgZmFpbHVyZTogW10gfTtcblx0ICB9XG5cblx0ICBfaW5oZXJpdHMoU3RvcmUsIF9FdmVudEVtaXR0ZXIpO1xuXG5cdCAgX2NyZWF0ZUNsYXNzKFN0b3JlLCB7XG5cdCAgICBzZXRTdGF0ZToge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3RhdGUobmV3U3RhdGUpIHtcblx0ICAgICAgICAvLyBEbyBhIHRyYW5zYWN0aW9uYWwgc3RhdGUgdXBkYXRlIGlmIGEgZnVuY3Rpb24gaXMgcGFzc2VkXG5cdCAgICAgICAgaWYgKHR5cGVvZiBuZXdTdGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICB2YXIgcHJldlN0YXRlID0gdGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoID8gdGhpcy5fcGVuZGluZ1N0YXRlIDogdGhpcy5zdGF0ZTtcblxuXHQgICAgICAgICAgbmV3U3RhdGUgPSBuZXdTdGF0ZShwcmV2U3RhdGUpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmICh0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2gpIHtcblx0ICAgICAgICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHRoaXMuX2Fzc2lnblN0YXRlKHRoaXMuX3BlbmRpbmdTdGF0ZSwgbmV3U3RhdGUpO1xuXHQgICAgICAgICAgdGhpcy5fZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCA9IHRydWU7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9hc3NpZ25TdGF0ZSh0aGlzLnN0YXRlLCBuZXdTdGF0ZSk7XG5cdCAgICAgICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVwbGFjZVN0YXRlOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXBsYWNlU3RhdGUobmV3U3RhdGUpIHtcblx0ICAgICAgICBpZiAodGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoKSB7XG5cdCAgICAgICAgICB0aGlzLl9wZW5kaW5nU3RhdGUgPSB0aGlzLl9hc3NpZ25TdGF0ZSh1bmRlZmluZWQsIG5ld1N0YXRlKTtcblx0ICAgICAgICAgIHRoaXMuX2VtaXRDaGFuZ2VBZnRlckhhbmRsaW5nRGlzcGF0Y2ggPSB0cnVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5fYXNzaWduU3RhdGUodW5kZWZpbmVkLCBuZXdTdGF0ZSk7XG5cdCAgICAgICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZ2V0U3RhdGVBc09iamVjdDoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3RhdGVBc09iamVjdCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIF9hc3NpZ25TdGF0ZToge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Fzc2lnblN0YXRlKCkge1xuXHQgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiAodGhpcy5jb25zdHJ1Y3Rvci5hc3NpZ25TdGF0ZSB8fCBTdG9yZS5hc3NpZ25TdGF0ZSkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGZvcmNlVXBkYXRlOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZSgpIHtcblx0ICAgICAgICBpZiAodGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoKSB7XG5cdCAgICAgICAgICB0aGlzLl9lbWl0Q2hhbmdlQWZ0ZXJIYW5kbGluZ0Rpc3BhdGNoID0gdHJ1ZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHJlZ2lzdGVyOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcihhY3Rpb25JZCwgaGFuZGxlcikge1xuXHQgICAgICAgIGFjdGlvbklkID0gZW5zdXJlQWN0aW9uSWQoYWN0aW9uSWQpO1xuXG5cdCAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9dGhpcy5faGFuZGxlcnNbYWN0aW9uSWRdID0gaGFuZGxlci5iaW5kKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVnaXN0ZXJBc3luYzoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJBc3luYyhhY3Rpb25JZCwgYmVnaW5IYW5kbGVyLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcblx0ICAgICAgICBhY3Rpb25JZCA9IGVuc3VyZUFjdGlvbklkKGFjdGlvbklkKTtcblxuXHQgICAgICAgIHZhciBhc3luY0hhbmRsZXJzID0gdGhpcy5fYmluZEFzeW5jSGFuZGxlcnMoe1xuXHQgICAgICAgICAgYmVnaW46IGJlZ2luSGFuZGxlcixcblx0ICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NIYW5kbGVyLFxuXHQgICAgICAgICAgZmFpbHVyZTogZmFpbHVyZUhhbmRsZXIgfSk7XG5cblx0ICAgICAgICB0aGlzLl9hc3luY0hhbmRsZXJzW2FjdGlvbklkXSA9IGFzeW5jSGFuZGxlcnM7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICByZWdpc3RlckFsbDoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJBbGwoaGFuZGxlcikge1xuXHQgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfXRoaXMuX2NhdGNoQWxsSGFuZGxlcnMucHVzaChoYW5kbGVyLmJpbmQodGhpcykpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVnaXN0ZXJBbGxBc3luYzoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJBbGxBc3luYyhiZWdpbkhhbmRsZXIsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICB2YXIgYXN5bmNIYW5kbGVycyA9IHRoaXMuX2JpbmRBc3luY0hhbmRsZXJzKHtcblx0ICAgICAgICAgIGJlZ2luOiBiZWdpbkhhbmRsZXIsXG5cdCAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzSGFuZGxlcixcblx0ICAgICAgICAgIGZhaWx1cmU6IGZhaWx1cmVIYW5kbGVyIH0pO1xuXG5cdCAgICAgICAgT2JqZWN0LmtleXMoYXN5bmNIYW5kbGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICBfdGhpcy5fY2F0Y2hBbGxBc3luY0hhbmRsZXJzW2tleV0ucHVzaChhc3luY0hhbmRsZXJzW2tleV0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgX2JpbmRBc3luY0hhbmRsZXJzOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYmluZEFzeW5jSGFuZGxlcnMoYXN5bmNIYW5kbGVycykge1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBhc3luY0hhbmRsZXJzKSB7XG5cdCAgICAgICAgICBpZiAoIWFzeW5jSGFuZGxlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cblx0ICAgICAgICAgIHZhciBoYW5kbGVyID0gYXN5bmNIYW5kbGVyc1trZXldO1xuXG5cdCAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICBhc3luY0hhbmRsZXJzW2tleV0gPSBoYW5kbGVyLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBkZWxldGUgYXN5bmNIYW5kbGVyc1trZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBhc3luY0hhbmRsZXJzO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgd2FpdEZvcjoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gd2FpdEZvcih0b2tlbnNPclN0b3Jlcykge1xuXHQgICAgICAgIHRoaXMuX3dhaXRGb3IodG9rZW5zT3JTdG9yZXMpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgaGFuZGxlcjoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlcihwYXlsb2FkKSB7XG5cdCAgICAgICAgdmFyIGJvZHkgPSBwYXlsb2FkLmJvZHk7XG5cdCAgICAgICAgdmFyIGFjdGlvbklkID0gcGF5bG9hZC5hY3Rpb25JZDtcblx0ICAgICAgICB2YXIgX2FzeW5jID0gcGF5bG9hZC5hc3luYztcblx0ICAgICAgICB2YXIgYWN0aW9uQXJncyA9IHBheWxvYWQuYWN0aW9uQXJncztcblx0ICAgICAgICB2YXIgZXJyb3IgPSBwYXlsb2FkLmVycm9yO1xuXG5cdCAgICAgICAgdmFyIF9hbGxIYW5kbGVycyA9IHRoaXMuX2NhdGNoQWxsSGFuZGxlcnM7XG5cdCAgICAgICAgdmFyIF9oYW5kbGVyID0gdGhpcy5faGFuZGxlcnNbYWN0aW9uSWRdO1xuXG5cdCAgICAgICAgdmFyIF9hbGxBc3luY0hhbmRsZXJzID0gdGhpcy5fY2F0Y2hBbGxBc3luY0hhbmRsZXJzW19hc3luY107XG5cdCAgICAgICAgdmFyIF9hc3luY0hhbmRsZXIgPSB0aGlzLl9hc3luY0hhbmRsZXJzW2FjdGlvbklkXSAmJiB0aGlzLl9hc3luY0hhbmRsZXJzW2FjdGlvbklkXVtfYXN5bmNdO1xuXG5cdCAgICAgICAgaWYgKF9hc3luYykge1xuXHQgICAgICAgICAgdmFyIGJlZ2luT3JGYWlsdXJlSGFuZGxlcnMgPSBfYWxsQXN5bmNIYW5kbGVycy5jb25jYXQoW19hc3luY0hhbmRsZXJdKTtcblxuXHQgICAgICAgICAgc3dpdGNoIChfYXN5bmMpIHtcblx0ICAgICAgICAgICAgY2FzZSBcImJlZ2luXCI6XG5cdCAgICAgICAgICAgICAgdGhpcy5fcGVyZm9ybUhhbmRsZXIoYmVnaW5PckZhaWx1cmVIYW5kbGVycywgYWN0aW9uQXJncyk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICBjYXNlIFwiZmFpbHVyZVwiOlxuXHQgICAgICAgICAgICAgIHRoaXMuX3BlcmZvcm1IYW5kbGVyKGJlZ2luT3JGYWlsdXJlSGFuZGxlcnMsIFtlcnJvci5jb25jYXQoYWN0aW9uQXJncyldKTtcblx0ICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6XG5cdCAgICAgICAgICAgICAgdGhpcy5fcGVyZm9ybUhhbmRsZXIoX2FsbEFzeW5jSGFuZGxlcnMuY29uY2F0KFtfYXN5bmNIYW5kbGVyIHx8IF9oYW5kbGVyXSksIFtib2R5XSk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICB0aGlzLl9wZXJmb3JtSGFuZGxlcihfYWxsSGFuZGxlcnMuY29uY2F0KFtfaGFuZGxlcl0pLCBbYm9keV0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgX3BlcmZvcm1IYW5kbGVyOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGVyZm9ybUhhbmRsZXIoX2hhbmRsZXJzLCBhcmdzKSB7XG5cdCAgICAgICAgdGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLl9wZW5kaW5nU3RhdGUgPSB0aGlzLl9hc3NpZ25TdGF0ZSh1bmRlZmluZWQsIHRoaXMuc3RhdGUpO1xuXHQgICAgICAgIHRoaXMuX2VtaXRDaGFuZ2VBZnRlckhhbmRsaW5nRGlzcGF0Y2ggPSBmYWxzZTtcblxuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB0aGlzLl9wZXJmb3JtSGFuZGxlcnMoX2hhbmRsZXJzLCBhcmdzKTtcblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgaWYgKHRoaXMuX2VtaXRDaGFuZ2VBZnRlckhhbmRsaW5nRGlzcGF0Y2gpIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX3BlbmRpbmdTdGF0ZTtcblx0ICAgICAgICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIpO1xuXHQgICAgICAgICAgfVxuXG5cdCAgICAgICAgICB0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2ggPSBmYWxzZTtcblx0ICAgICAgICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIHRoaXMuX2VtaXRDaGFuZ2VBZnRlckhhbmRsaW5nRGlzcGF0Y2ggPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBfcGVyZm9ybUhhbmRsZXJzOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGVyZm9ybUhhbmRsZXJzKF9oYW5kbGVycywgYXJncykge1xuXHQgICAgICAgIF9oYW5kbGVycy5mb3JFYWNoKChmdW5jdGlvbiAoX2hhbmRsZXIpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgX2hhbmRsZXIgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xuXHQgICAgICAgICAgX2hhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgfSkuYmluZCh0aGlzKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBhc3NpZ25TdGF0ZToge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gYXNzaWduU3RhdGUob2xkU3RhdGUsIG5ld1N0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgb2xkU3RhdGUsIG5ld1N0YXRlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXG5cdCAgcmV0dXJuIFN0b3JlO1xuXHR9KShFdmVudEVtaXR0ZXIpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gU3RvcmU7XG5cblx0ZnVuY3Rpb24gZW5zdXJlQWN0aW9uSWQoYWN0aW9uT3JBY3Rpb25JZCkge1xuXHQgIHJldHVybiB0eXBlb2YgYWN0aW9uT3JBY3Rpb25JZCA9PT0gXCJmdW5jdGlvblwiID8gYWN0aW9uT3JBY3Rpb25JZC5faWQgOiBhY3Rpb25PckFjdGlvbklkO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdC8qKlxuXHQgKiBBY3Rpb25zXG5cdCAqXG5cdCAqIEluc3RhbmNlcyBvZiB0aGUgQWN0aW9ucyBjbGFzcyByZXByZXNlbnQgYSBzZXQgb2YgYWN0aW9ucy4gKEluIEZsdXggcGFybGFuY2UsXG5cdCAqIHRoZXNlIG1pZ2h0IGJlIG1vcmUgYWNjdXJhdGVseSBkZW5vdGVkIGFzIEFjdGlvbiBDcmVhdG9ycywgd2hpbGUgQWN0aW9uXG5cdCAqIHJlZmVycyB0byB0aGUgcGF5bG9hZCBzZW50IHRvIHRoZSBkaXNwYXRjaGVyLCBidXQgdGhpcyBpcy4uLiBjb25mdXNpbmcuIFdlXG5cdCAqIHdpbGwgdXNlIEFjdGlvbiB0byBtZWFuIHRoZSBmdW5jdGlvbiB5b3UgY2FsbCB0byB0cmlnZ2VyIGEgZGlzcGF0Y2guKVxuXHQgKlxuXHQgKiBDcmVhdGUgYWN0aW9ucyBieSBleHRlbmRpbmcgZnJvbSB0aGUgYmFzZSBBY3Rpb25zIGNsYXNzIGFuZCBhZGRpbmcgbWV0aG9kcy5cblx0ICogQWxsIG1ldGhvZHMgb24gdGhlIHByb3RvdHlwZSAoZXhjZXB0IHRoZSBjb25zdHJ1Y3Rvcikgd2lsbCBiZVxuXHQgKiBjb252ZXJ0ZWQgaW50byBhY3Rpb25zLiBUaGUgcmV0dXJuIHZhbHVlIG9mIGFuIGFjdGlvbiBpcyB1c2VkIGFzIHRoZSBib2R5XG5cdCAqIG9mIHRoZSBwYXlsb2FkIHNlbnQgdG8gdGhlIGRpc3BhdGNoZXIuXG5cdCAqL1xuXG5cdHZhciB1bmlxdWVJZCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKTtcblxuXHR2YXIgQWN0aW9ucyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gQWN0aW9ucygpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY3Rpb25zKTtcblxuXHQgICAgdGhpcy5fYmFzZUlkID0gdW5pcXVlSWQoKTtcblxuXHQgICAgdmFyIG1ldGhvZE5hbWVzID0gdGhpcy5fZ2V0QWN0aW9uTWV0aG9kTmFtZXMoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kTmFtZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lc1tpXTtcblx0ICAgICAgdGhpcy5fd3JhcEFjdGlvbihtZXRob2ROYW1lKTtcblx0ICAgIH1cblxuXHQgICAgdGhpcy5nZXRDb25zdGFudHMgPSB0aGlzLmdldEFjdGlvbklkcztcblx0ICB9XG5cblx0ICBfY3JlYXRlQ2xhc3MoQWN0aW9ucywge1xuXHQgICAgZ2V0QWN0aW9uSWRzOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY3Rpb25JZHMoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgIHJldHVybiB0aGlzLl9nZXRBY3Rpb25NZXRob2ROYW1lcygpLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBhY3Rpb25OYW1lKSB7XG5cdCAgICAgICAgICByZXN1bHRbYWN0aW9uTmFtZV0gPSBfdGhpc1thY3Rpb25OYW1lXS5faWQ7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH0sIHt9KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIF9nZXRBY3Rpb25NZXRob2ROYW1lczoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEFjdGlvbk1ldGhvZE5hbWVzKGluc3RhbmNlKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSkuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICAgICAgICByZXR1cm4gbmFtZSAhPT0gXCJjb25zdHJ1Y3RvclwiICYmIHR5cGVvZiBfdGhpc1tuYW1lXSA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgX3dyYXBBY3Rpb246IHtcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIF93cmFwQWN0aW9uKG1ldGhvZE5hbWUpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgdmFyIG9yaWdpbmFsTWV0aG9kID0gdGhpc1ttZXRob2ROYW1lXTtcblx0ICAgICAgICB2YXIgYWN0aW9uSWQgPSB0aGlzLl9jcmVhdGVBY3Rpb25JZChtZXRob2ROYW1lKTtcblxuXHQgICAgICAgIHZhciBhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICAgICAgfVxuXG5cdCAgICAgICAgICB2YXIgYm9keSA9IG9yaWdpbmFsTWV0aG9kLmFwcGx5KF90aGlzLCBhcmdzKTtcblxuXHQgICAgICAgICAgaWYgKGlzUHJvbWlzZShib2R5KSkge1xuXHQgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGJvZHk7XG5cdCAgICAgICAgICAgIF90aGlzLl9kaXNwYXRjaEFzeW5jKGFjdGlvbklkLCBwcm9taXNlLCBhcmdzLCBtZXRob2ROYW1lKVxuXHQgICAgICAgICAgICAvLyBDYXRjaCBlcnJvcnMgYW5kIGRvIG5vdGhpbmdcblx0ICAgICAgICAgICAgLy8gVGhleSBjYW4gYmUgaGFuZGxlZCBieSBzdG9yZSBvciBjYWxsZXJcblx0ICAgICAgICAgICAgW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycm9yKSB7fSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBfdGhpcy5fZGlzcGF0Y2goYWN0aW9uSWQsIGJvZHksIGFyZ3MsIG1ldGhvZE5hbWUpO1xuXHQgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgbWV0aG9kJ3MgcmV0dXJuIHZhbHVlIHRvIGNhbGxlclxuXHQgICAgICAgICAgcmV0dXJuIGJvZHk7XG5cdCAgICAgICAgfTtcblxuXHQgICAgICAgIGFjdGlvbi5faWQgPSBhY3Rpb25JZDtcblxuXHQgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0gPSBhY3Rpb247XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBfY3JlYXRlQWN0aW9uSWQ6IHtcblxuXHQgICAgICAvKipcblx0ICAgICAgICogQ3JlYXRlIHVuaXF1ZSBzdHJpbmcgY29uc3RhbnQgZm9yIGFuIGFjdGlvbiBtZXRob2QsIHVzaW5nXG5cdCAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIC0gTmFtZSBvZiB0aGUgYWN0aW9uIG1ldGhvZFxuXHQgICAgICAgKi9cblxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUFjdGlvbklkKG1ldGhvZE5hbWUpIHtcblx0ICAgICAgICByZXR1cm4gXCJcIiArIHRoaXMuX2Jhc2VJZCArIFwiLVwiICsgbWV0aG9kTmFtZTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIF9kaXNwYXRjaDoge1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Rpc3BhdGNoKGFjdGlvbklkLCBib2R5LCBhcmdzLCBtZXRob2ROYW1lKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpc3BhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgYm9keSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHQgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKGFjdGlvbklkLCBib2R5LCBhcmdzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgICAgICAgIGNvbnNvbGUud2FybihcIllvdSd2ZSBhdHRlbXB0ZWQgdG8gcGVyZm9ybSB0aGUgYWN0aW9uIFwiICsgKFwiXCIgKyB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyBcIiNcIiArIG1ldGhvZE5hbWUgKyBcIiwgYnV0IGl0IGhhc24ndCBiZWVuIGFkZGVkIFwiKSArIFwidG8gYSBGbHV4IGluc3RhbmNlLlwiKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICByZXR1cm4gYm9keTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIF9kaXNwYXRjaEFzeW5jOiB7XG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgcHJvbWlzZSwgYXJncywgbWV0aG9kTmFtZSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kaXNwYXRjaEFzeW5jID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIHByb21pc2UsIGFyZ3MpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICAgICAgY29uc29sZS53YXJuKFwiWW91J3ZlIGF0dGVtcHRlZCB0byBwZXJmb3JtIHRoZSBhc3luY2hyb25vdXMgYWN0aW9uIFwiICsgKFwiXCIgKyB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyBcIiNcIiArIG1ldGhvZE5hbWUgKyBcIiwgYnV0IGl0IGhhc24ndCBiZWVuIGFkZGVkIFwiKSArIFwidG8gYSBGbHV4IGluc3RhbmNlLlwiKTtcblx0ICAgICAgICAgIH1cblxuXHQgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cblx0ICByZXR1cm4gQWN0aW9ucztcblx0fSkoKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IEFjdGlvbnM7XG5cblx0ZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqL1xuXG5cdG1vZHVsZS5leHBvcnRzLkRpc3BhdGNoZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0ICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgRXZlbnRFbWl0dGVyIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBFdmVudCBoYW5kbGVyIHRvIGJlIGNhbGxlZC5cblx0ICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBDb250ZXh0IGZvciBmdW5jdGlvbiBleGVjdXRpb24uXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IGVtaXQgb25jZVxuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG5cdCAgdGhpcy5mbiA9IGZuO1xuXHQgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNaW5pbWFsIEV2ZW50RW1pdHRlciBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuXHQgKiBFdmVudEVtaXR0ZXIgaW50ZXJmYWNlLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsgLyogTm90aGluZyB0byBzZXQgKi8gfVxuXG5cdC8qKlxuXHQgKiBIb2xkcyB0aGUgYXNzaWduZWQgRXZlbnRFbWl0dGVycyBieSBuYW1lLlxuXHQgKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBSZXR1cm4gYSBsaXN0IG9mIGFzc2lnbmVkIGV2ZW50IGxpc3RlbmVycy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudHMgdGhhdCBzaG91bGQgYmUgbGlzdGVkLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuXHQgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbZXZlbnRdKSByZXR1cm4gW107XG5cdCAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF0uZm4pIHJldHVybiBbdGhpcy5fZXZlbnRzW2V2ZW50XS5mbl07XG5cblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX2V2ZW50c1tldmVudF0ubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuXHQgICAgZWVbaV0gPSB0aGlzLl9ldmVudHNbZXZlbnRdW2ldLmZuO1xuXHQgIH1cblxuXHQgIHJldHVybiBlZTtcblx0fTtcblxuXHQvKipcblx0ICogRW1pdCBhbiBldmVudCB0byBhbGwgcmVnaXN0ZXJlZCBldmVudCBsaXN0ZW5lcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0aW9uIGlmIHdlJ3ZlIGVtaXR0ZWQgYW4gZXZlbnQuXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcblx0ICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW2V2ZW50XSkgcmV0dXJuIGZhbHNlO1xuXG5cdCAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldmVudF1cblx0ICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuXHQgICAgLCBhcmdzXG5cdCAgICAsIGk7XG5cblx0ICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGxpc3RlbmVycy5mbikge1xuXHQgICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHRydWUpO1xuXG5cdCAgICBzd2l0Y2ggKGxlbikge1xuXHQgICAgICBjYXNlIDE6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCksIHRydWU7XG5cdCAgICAgIGNhc2UgMjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSksIHRydWU7XG5cdCAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuXHQgICAgICBjYXNlIDQ6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMyksIHRydWU7XG5cdCAgICAgIGNhc2UgNTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCksIHRydWU7XG5cdCAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuXHQgICAgfVxuXG5cdCAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblxuXHQgICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcblx0ICAgICAgLCBqO1xuXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnNbaV0uZm4sIHRydWUpO1xuXG5cdCAgICAgIHN3aXRjaCAobGVuKSB7XG5cdCAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuXHQgICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG5cdCAgICAgICAgICB9XG5cblx0ICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbi5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblxuXHQvKipcblx0ICogUmVnaXN0ZXIgYSBuZXcgRXZlbnRMaXN0ZW5lciBmb3IgdGhlIGdpdmVuIGV2ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgTmFtZSBvZiB0aGUgZXZlbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rvbn0gZm4gQ2FsbGJhY2sgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGNvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuXHQgIHZhciBsaXN0ZW5lciA9IG5ldyBFRShmbiwgY29udGV4dCB8fCB0aGlzKTtcblxuXHQgIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICBpZiAoIXRoaXMuX2V2ZW50c1tldmVudF0pIHRoaXMuX2V2ZW50c1tldmVudF0gPSBsaXN0ZW5lcjtcblx0ICBlbHNlIHtcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzW2V2ZW50XS5mbikgdGhpcy5fZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcblx0ICAgIGVsc2UgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtcblx0ICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSwgbGlzdGVuZXJcblx0ICAgIF07XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cblx0LyoqXG5cdCAqIEFkZCBhbiBFdmVudExpc3RlbmVyIHRoYXQncyBvbmx5IGNhbGxlZCBvbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgTmFtZSBvZiB0aGUgZXZlbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIENhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKiBAcGFyYW0ge01peGVkfSBjb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XG5cdCAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IHRoaXMsIHRydWUpO1xuXG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgIGlmICghdGhpcy5fZXZlbnRzW2V2ZW50XSkgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IGxpc3RlbmVyO1xuXHQgIGVsc2Uge1xuXHQgICAgaWYgKCF0aGlzLl9ldmVudHNbZXZlbnRdLmZuKSB0aGlzLl9ldmVudHNbZXZlbnRdLnB1c2gobGlzdGVuZXIpO1xuXHQgICAgZWxzZSB0aGlzLl9ldmVudHNbZXZlbnRdID0gW1xuXHQgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdLCBsaXN0ZW5lclxuXHQgICAgXTtcblx0ICB9XG5cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudCB3ZSB3YW50IHRvIHJlbW92ZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIHRoYXQgd2UgbmVlZCB0byBmaW5kLlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25jZSBsaXN0ZW5lcnMuXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGZuLCBvbmNlKSB7XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1tldmVudF0pIHJldHVybiB0aGlzO1xuXG5cdCAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldmVudF1cblx0ICAgICwgZXZlbnRzID0gW107XG5cblx0ICBpZiAoZm4pIHtcblx0ICAgIGlmIChsaXN0ZW5lcnMuZm4gJiYgKGxpc3RlbmVycy5mbiAhPT0gZm4gfHwgKG9uY2UgJiYgIWxpc3RlbmVycy5vbmNlKSkpIHtcblx0ICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzKTtcblx0ICAgIH1cblx0ICAgIGlmICghbGlzdGVuZXJzLmZuKSBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8IChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkpIHtcblx0ICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgLy9cblx0ICAvLyBSZXNldCB0aGUgYXJyYXksIG9yIHJlbW92ZSBpdCBjb21wbGV0ZWx5IGlmIHdlIGhhdmUgbm8gbW9yZSBsaXN0ZW5lcnMuXG5cdCAgLy9cblx0ICBpZiAoZXZlbnRzLmxlbmd0aCkge1xuXHQgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgIH1cblxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYWxsIGxpc3RlbmVycyBvciBvbmx5IHRoZSBsaXN0ZW5lcnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBUaGUgZXZlbnQgd2FudCB0byByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IuXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuXHQgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcblxuXHQgIGlmIChldmVudCkgZGVsZXRlIHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgZWxzZSB0aGlzLl9ldmVudHMgPSB7fTtcblxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8vXG5cdC8vIEFsaWFzIG1ldGhvZHMgbmFtZXMgYmVjYXVzZSBwZW9wbGUgcm9sbCBsaWtlIHRoYXQuXG5cdC8vXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cblx0Ly9cblx0Ly8gVGhpcyBmdW5jdGlvbiBkb2Vzbid0IGFwcGx5IGFueW1vcmUuXG5cdC8vXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKCkge1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8vXG5cdC8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuXHQvL1xuXHRFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXHRFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyMiA9IEV2ZW50RW1pdHRlcjtcblx0RXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlcjMgPSBFdmVudEVtaXR0ZXI7XG5cblx0Ly9cblx0Ly8gRXhwb3NlIHRoZSBtb2R1bGUuXG5cdC8vXG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG5cdCAqIEB0eXBlY2hlY2tzXG5cdCAqL1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG5cdHZhciBfbGFzdElEID0gMTtcblx0dmFyIF9wcmVmaXggPSAnSURfJztcblxuXHQvKipcblx0ICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuXHQgKiBkaWZmZXJlbnQgZnJvbSBnZW5lcmljIHB1Yi1zdWIgc3lzdGVtcyBpbiB0d28gd2F5czpcblx0ICpcblx0ICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG5cdCAqICAgICAgZGlzcGF0Y2hlZCB0byBldmVyeSByZWdpc3RlcmVkIGNhbGxiYWNrLlxuXHQgKiAgIDIpIENhbGxiYWNrcyBjYW4gYmUgZGVmZXJyZWQgaW4gd2hvbGUgb3IgcGFydCB1bnRpbCBvdGhlciBjYWxsYmFja3MgaGF2ZVxuXHQgKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG5cdCAqXG5cdCAqIEZvciBleGFtcGxlLCBjb25zaWRlciB0aGlzIGh5cG90aGV0aWNhbCBmbGlnaHQgZGVzdGluYXRpb24gZm9ybSwgd2hpY2hcblx0ICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcblx0ICpcblx0ICogICB2YXIgZmxpZ2h0RGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKCk7XG5cdCAqXG5cdCAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY291bnRyeSBpcyBzZWxlY3RlZFxuXHQgKiAgIHZhciBDb3VudHJ5U3RvcmUgPSB7Y291bnRyeTogbnVsbH07XG5cdCAqXG5cdCAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY2l0eSBpcyBzZWxlY3RlZFxuXHQgKiAgIHZhciBDaXR5U3RvcmUgPSB7Y2l0eTogbnVsbH07XG5cdCAqXG5cdCAqICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGJhc2UgZmxpZ2h0IHByaWNlIG9mIHRoZSBzZWxlY3RlZCBjaXR5XG5cdCAqICAgdmFyIEZsaWdodFByaWNlU3RvcmUgPSB7cHJpY2U6IG51bGx9XG5cdCAqXG5cdCAqIFdoZW4gYSB1c2VyIGNoYW5nZXMgdGhlIHNlbGVjdGVkIGNpdHksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuXHQgKlxuXHQgKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuXHQgKiAgICAgYWN0aW9uVHlwZTogJ2NpdHktdXBkYXRlJyxcblx0ICogICAgIHNlbGVjdGVkQ2l0eTogJ3BhcmlzJ1xuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYENpdHlTdG9yZWA6XG5cdCAqXG5cdCAqICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdCAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY2l0eS11cGRhdGUnKSB7XG5cdCAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG5cdCAqICAgICB9XG5cdCAqICAgfSk7XG5cdCAqXG5cdCAqIFdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGNvdW50cnksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuXHQgKlxuXHQgKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuXHQgKiAgICAgYWN0aW9uVHlwZTogJ2NvdW50cnktdXBkYXRlJyxcblx0ICogICAgIHNlbGVjdGVkQ291bnRyeTogJ2F1c3RyYWxpYSdcblx0ICogICB9KTtcblx0ICpcblx0ICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGJvdGggc3RvcmVzOlxuXHQgKlxuXHQgKiAgICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuXHQgKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuXHQgKiAgICAgICBDb3VudHJ5U3RvcmUuY291bnRyeSA9IHBheWxvYWQuc2VsZWN0ZWRDb3VudHJ5O1xuXHQgKiAgICAgfVxuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuXHQgKiB0byB0aGUgcmV0dXJuZWQgdG9rZW4uIFVzaW5nIHRoaXMgdG9rZW4gd2l0aCBgd2FpdEZvcigpYCwgd2UgY2FuIGd1YXJhbnRlZVxuXHQgKiB0aGF0IGBDb3VudHJ5U3RvcmVgIGlzIHVwZGF0ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayB0aGF0IHVwZGF0ZXMgYENpdHlTdG9yZWBcblx0ICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG5cdCAqXG5cdCAqICAgQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0ICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcblx0ICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBtYXkgbm90IGJlIHVwZGF0ZWQuXG5cdCAqICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcblx0ICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuXHQgKlxuXHQgKiAgICAgICAvLyBTZWxlY3QgdGhlIGRlZmF1bHQgY2l0eSBmb3IgdGhlIG5ldyBjb3VudHJ5XG5cdCAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcblx0ICogICAgIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogVGhlIHVzYWdlIG9mIGB3YWl0Rm9yKClgIGNhbiBiZSBjaGFpbmVkLCBmb3IgZXhhbXBsZTpcblx0ICpcblx0ICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuXHQgKiAgICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdCAqICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb25UeXBlKSB7XG5cdCAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuXHQgKiAgICAgICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuXHQgKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG5cdCAqICAgICAgICAgICAgIGdldEZsaWdodFByaWNlU3RvcmUoQ291bnRyeVN0b3JlLmNvdW50cnksIENpdHlTdG9yZS5jaXR5KTtcblx0ICogICAgICAgICAgIGJyZWFrO1xuXHQgKlxuXHQgKiAgICAgICAgIGNhc2UgJ2NpdHktdXBkYXRlJzpcblx0ICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuXHQgKiAgICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG5cdCAqICAgICAgICAgICBicmVhaztcblx0ICogICAgIH1cblx0ICogICB9KTtcblx0ICpcblx0ICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG5cdCAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIG9yZGVyOiBgQ291bnRyeVN0b3JlYCwgYENpdHlTdG9yZWAsIHRoZW5cblx0ICogYEZsaWdodFByaWNlU3RvcmVgLlxuXHQgKi9cblxuXHQgIGZ1bmN0aW9uIERpc3BhdGNoZXIoKSB7XG5cdCAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcyA9IHt9O1xuXHQgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmcgPSB7fTtcblx0ICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkID0ge307XG5cdCAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcblx0ICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBudWxsO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2l0aCBldmVyeSBkaXNwYXRjaGVkIHBheWxvYWQuIFJldHVybnNcblx0ICAgKiBhIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgd2FpdEZvcigpYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG5cdCAgICogQHJldHVybiB7c3RyaW5nfVxuXHQgICAqL1xuXHQgIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdCAgICB2YXIgaWQgPSBfcHJlZml4ICsgX2xhc3RJRCsrO1xuXHQgICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdID0gY2FsbGJhY2s7XG5cdCAgICByZXR1cm4gaWQ7XG5cdCAgfTtcblxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZXMgYSBjYWxsYmFjayBiYXNlZCBvbiBpdHMgdG9rZW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICAgKi9cblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGlkKSB7XG5cdCAgICBpbnZhcmlhbnQoXG5cdCAgICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSxcblx0ICAgICAgJ0Rpc3BhdGNoZXIudW5yZWdpc3RlciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcblx0ICAgICAgaWRcblx0ICAgICk7XG5cdCAgICBkZWxldGUgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdO1xuXHQgIH07XG5cblx0ICAvKipcblx0ICAgKiBXYWl0cyBmb3IgdGhlIGNhbGxiYWNrcyBzcGVjaWZpZWQgdG8gYmUgaW52b2tlZCBiZWZvcmUgY29udGludWluZyBleGVjdXRpb25cblx0ICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG5cdCAgICogcmVzcG9uc2UgdG8gYSBkaXNwYXRjaGVkIHBheWxvYWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IGlkc1xuXHQgICAqL1xuXHQgIERpc3BhdGNoZXIucHJvdG90eXBlLndhaXRGb3I9ZnVuY3Rpb24oaWRzKSB7XG5cdCAgICBpbnZhcmlhbnQoXG5cdCAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyxcblx0ICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJ1xuXHQgICAgKTtcblx0ICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBpZHMubGVuZ3RoOyBpaSsrKSB7XG5cdCAgICAgIHZhciBpZCA9IGlkc1tpaV07XG5cdCAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcblx0ICAgICAgICBpbnZhcmlhbnQoXG5cdCAgICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0sXG5cdCAgICAgICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQgd2hpbGUgJyArXG5cdCAgICAgICAgICAnd2FpdGluZyBmb3IgYCVzYC4nLFxuXHQgICAgICAgICAgaWRcblx0ICAgICAgICApO1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGludmFyaWFudChcblx0ICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0sXG5cdCAgICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcblx0ICAgICAgICBpZFxuXHQgICAgICApO1xuXHQgICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcblx0ICAgIH1cblx0ICB9O1xuXG5cdCAgLyoqXG5cdCAgICogRGlzcGF0Y2hlcyBhIHBheWxvYWQgdG8gYWxsIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWRcblx0ICAgKi9cblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbihwYXlsb2FkKSB7XG5cdCAgICBpbnZhcmlhbnQoXG5cdCAgICAgICF0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcsXG5cdCAgICAgICdEaXNwYXRjaC5kaXNwYXRjaCguLi4pOiBDYW5ub3QgZGlzcGF0Y2ggaW4gdGhlIG1pZGRsZSBvZiBhIGRpc3BhdGNoLidcblx0ICAgICk7XG5cdCAgICB0aGlzLiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG5cdCAgICB0cnkge1xuXHQgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuXHQgICAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcblx0ICAgICAgfVxuXHQgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmcoKTtcblx0ICAgIH1cblx0ICB9O1xuXG5cdCAgLyoqXG5cdCAgICogSXMgdGhpcyBEaXNwYXRjaGVyIGN1cnJlbnRseSBkaXNwYXRjaGluZy5cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICovXG5cdCAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaXNEaXNwYXRjaGluZz1mdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmc7XG5cdCAgfTtcblxuXHQgIC8qKlxuXHQgICAqIENhbGwgdGhlIGNhbGxiYWNrIHN0b3JlZCB3aXRoIHRoZSBnaXZlbiBpZC4gQWxzbyBkbyBzb21lIGludGVybmFsXG5cdCAgICogYm9va2tlZXBpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjaz1mdW5jdGlvbihpZCkge1xuXHQgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcblx0ICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSh0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkKTtcblx0ICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSA9IHRydWU7XG5cdCAgfTtcblxuXHQgIC8qKlxuXHQgICAqIFNldCB1cCBib29ra2VlcGluZyBuZWVkZWQgd2hlbiBkaXNwYXRjaGluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZz1mdW5jdGlvbihwYXlsb2FkKSB7XG5cdCAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuXHQgICAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0gPSBmYWxzZTtcblx0ICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gcGF5bG9hZDtcblx0ICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IHRydWU7XG5cdCAgfTtcblxuXHQgIC8qKlxuXHQgICAqIENsZWFyIGJvb2trZWVwaW5nIHVzZWQgZm9yIGRpc3BhdGNoaW5nLlxuXHQgICAqXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nPWZ1bmN0aW9uKCkge1xuXHQgICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IG51bGw7XG5cdCAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcblx0ICB9O1xuXG5cblx0bW9kdWxlLmV4cG9ydHMgPSBEaXNwYXRjaGVyO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0ZnVuY3Rpb24gVG9PYmplY3QodmFsKSB7XG5cdFx0aWYgKHZhbCA9PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBPYmplY3QodmFsKTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0XHR2YXIgZnJvbTtcblx0XHR2YXIga2V5cztcblx0XHR2YXIgdG8gPSBUb09iamVjdCh0YXJnZXQpO1xuXG5cdFx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRcdGZyb20gPSBhcmd1bWVudHNbc107XG5cdFx0XHRrZXlzID0gT2JqZWN0LmtleXMoT2JqZWN0KGZyb20pKTtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdG87XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXG5cdHZhciBjb3VudCA9IDA7XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEgdW5pcXVlIElELlxuXHQgKlxuXHQgKiBPcHRpb25hbGx5IHBhc3MgYSBwcmVmaXggdG8gcHJlcGVuZCwgYSBzdWZmaXggdG8gYXBwZW5kLCBvciBhXG5cdCAqIG11bHRpcGxpZXIgdG8gdXNlIG9uIHRoZSBJRC5cblx0ICpcblx0ICogYGBganNcblx0ICogdW5pcXVlSWQoKTsgLy89PiAnMjUnXG5cdCAqXG5cdCAqIHVuaXF1ZUlkKHtwcmVmaXg6ICdhcHBsZV8nfSk7XG5cdCAqIC8vPT4gJ2FwcGxlXzEwJ1xuXHQgKlxuXHQgKiB1bmlxdWVJZCh7c3VmZml4OiAnX29yYW5nZSd9KTtcblx0ICogLy89PiAnMTBfb3JhbmdlJ1xuXHQgKlxuXHQgKiB1bmlxdWVJZCh7bXVsdGlwbGllcjogNX0pO1xuXHQgKiAvLz0+IDUsIDEwLCAxNSwgMjAuLi5cblx0ICogYGBgXG5cdCAqXG5cdCAqIFRvIHJlc2V0IHRoZSBgaWRgIHRvIHplcm8sIGRvIGBpZC5yZXNldCgpYC5cblx0ICpcblx0ICogQHBhcmFtICB7T2JqZWN0fSBgb3B0aW9uc2AgT3B0aW9uYWxseSBwYXNzIGEgYHByZWZpeGAsIGBzdWZmaXhgIGFuZC9vciBgbXVsdGlwbGllci5cblx0ICogQHJldHVybiB7U3RyaW5nfSBUaGUgdW5pcXVlIGlkLlxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblxuXHR2YXIgaWQgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0ICB2YXIgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXg7XG5cdCAgdmFyIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuXG5cdCAgdmFyIGlkID0gKytjb3VudCAqIChvcHRpb25zLm11bHRpcGxpZXIgfHwgMSk7XG5cblx0ICBpZiAocHJlZml4ID09IG51bGwpIHtcblx0ICAgIHByZWZpeCA9ICcnO1xuXHQgIH1cblxuXHQgIGlmIChzdWZmaXggPT0gbnVsbCkge1xuXHQgICAgc3VmZml4ID0gJyc7XG5cdCAgfVxuXG5cdCAgcmV0dXJuIFN0cmluZyhwcmVmaXgpICsgaWQgKyBTdHJpbmcoc3VmZml4KTtcblx0fTtcblxuXG5cdGlkLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGNvdW50ID0gMDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcblx0ICovXG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0LyoqXG5cdCAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cblx0ICpcblx0ICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcblx0ICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG5cdCAqIGV4cGVjdGluZy5cblx0ICpcblx0ICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcblx0ICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuXHQgKi9cblxuXHR2YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcblx0ICBpZiAoZmFsc2UpIHtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgaWYgKCFjb25kaXRpb24pIHtcblx0ICAgIHZhciBlcnJvcjtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBlcnJvciA9IG5ldyBFcnJvcihcblx0ICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG5cdCAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuXHQgICAgICAgICdJbnZhcmlhbnQgVmlvbGF0aW9uOiAnICtcblx0ICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuXHQgICAgICApO1xuXHQgICAgfVxuXG5cdCAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG5cdCAgICB0aHJvdyBlcnJvcjtcblx0ICB9XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogZmx1bW1veC5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA2ZDk2MjhiYTMxYTQ2OWVjOTdhM1xuICoqLyIsIi8qKlxuICogRmx1eFxuICpcbiAqIFRoZSBtYWluIEZsdXggY2xhc3MuXG4gKi9cblxuaW1wb3J0IFN0b3JlIGZyb20gJy4vU3RvcmUnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi9BY3Rpb25zJztcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tICdmbHV4JztcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsdXggZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKCk7XG5cbiAgICB0aGlzLl9zdG9yZXMgPSB7fTtcbiAgICB0aGlzLl9hY3Rpb25zID0ge307XG4gIH1cblxuICBjcmVhdGVTdG9yZShrZXksIF9TdG9yZSwgLi4uY29uc3RydWN0b3JBcmdzKSB7XG5cbiAgICBpZiAoIShfU3RvcmUucHJvdG90eXBlIGluc3RhbmNlb2YgU3RvcmUpKSB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoX1N0b3JlKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgWW91J3ZlIGF0dGVtcHRlZCB0byBjcmVhdGUgYSBzdG9yZSBmcm9tIHRoZSBjbGFzcyAke2NsYXNzTmFtZX0sIHdoaWNoIGBcbiAgICAgICsgYGRvZXMgbm90IGhhdmUgdGhlIGJhc2UgU3RvcmUgY2xhc3MgaW4gaXRzIHByb3RvdHlwZSBjaGFpbi4gTWFrZSBzdXJlIGBcbiAgICAgICsgYHlvdSdyZSB1c2luZyB0aGUgXFxgZXh0ZW5kc1xcYCBrZXl3b3JkOiBcXGBjbGFzcyAke2NsYXNzTmFtZX0gZXh0ZW5kcyBgXG4gICAgICArIGBTdG9yZSB7IC4uLiB9XFxgYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3RvcmVzLmhhc093blByb3BlcnR5KGtleSkgJiYgdGhpcy5fc3RvcmVzW2tleV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFlvdSd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIG11bHRpcGxlIHN0b3JlcyB3aXRoIGtleSAke2tleX0uIEtleXMgbXVzdCBgXG4gICAgICArIGBiZSB1bmlxdWUuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdG9yZSA9IG5ldyBfU3RvcmUoLi4uY29uc3RydWN0b3JBcmdzKTtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuZGlzcGF0Y2hlci5yZWdpc3RlcihzdG9yZS5oYW5kbGVyLmJpbmQoc3RvcmUpKTtcblxuICAgIHN0b3JlLl93YWl0Rm9yID0gdGhpcy53YWl0Rm9yLmJpbmQodGhpcyk7XG4gICAgc3RvcmUuX3Rva2VuID0gdG9rZW47XG4gICAgc3RvcmUuX2dldEFsbEFjdGlvbklkcyA9IHRoaXMuZ2V0QWxsQWN0aW9uSWRzLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9zdG9yZXNba2V5XSA9IHN0b3JlO1xuXG4gICAgcmV0dXJuIHN0b3JlO1xuICB9XG5cbiAgZ2V0U3RvcmUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3Jlcy5oYXNPd25Qcm9wZXJ0eShrZXkpID8gdGhpcy5fc3RvcmVzW2tleV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICBjcmVhdGVBY3Rpb25zKGtleSwgX0FjdGlvbnMsIC4uLmNvbnN0cnVjdG9yQXJncykge1xuXG4gICAgaWYgKCEoX0FjdGlvbnMucHJvdG90eXBlIGluc3RhbmNlb2YgQWN0aW9ucykgJiYgX0FjdGlvbnMgIT09IEFjdGlvbnMpIHtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdldENsYXNzTmFtZShfQWN0aW9ucyk7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFlvdSd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIGFjdGlvbnMgZnJvbSB0aGUgY2xhc3MgJHtjbGFzc05hbWV9LCB3aGljaCBgXG4gICAgICArIGBkb2VzIG5vdCBoYXZlIHRoZSBiYXNlIEFjdGlvbnMgY2xhc3MgaW4gaXRzIHByb3RvdHlwZSBjaGFpbi4gTWFrZSBgXG4gICAgICArIGBzdXJlIHlvdSdyZSB1c2luZyB0aGUgXFxgZXh0ZW5kc1xcYCBrZXl3b3JkOiBcXGBjbGFzcyAke2NsYXNzTmFtZX0gYFxuICAgICAgKyBgZXh0ZW5kcyBBY3Rpb25zIHsgLi4uIH1cXGBgXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3Rpb25zLmhhc093blByb3BlcnR5KGtleSkgJiYgdGhpcy5fYWN0aW9uc1trZXldKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBZb3UndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBtdWx0aXBsZSBhY3Rpb25zIHdpdGgga2V5ICR7a2V5fS4gS2V5cyBgXG4gICAgICArIGBtdXN0IGJlIHVuaXF1ZS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbnMgPSBuZXcgX0FjdGlvbnMoLi4uY29uc3RydWN0b3JBcmdzKTtcbiAgICBhY3Rpb25zLmRpc3BhdGNoID0gdGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpO1xuICAgIGFjdGlvbnMuZGlzcGF0Y2hBc3luYyA9IHRoaXMuZGlzcGF0Y2hBc3luYy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fYWN0aW9uc1trZXldID0gYWN0aW9ucztcblxuICAgIHJldHVybiBhY3Rpb25zO1xuICB9XG5cbiAgZ2V0QWN0aW9ucyhrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpID8gdGhpcy5fYWN0aW9uc1trZXldIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0QWN0aW9uSWRzKGtleSkge1xuICAgIGNvbnN0IGFjdGlvbnMgPSB0aGlzLmdldEFjdGlvbnMoa2V5KTtcblxuICAgIGlmICghYWN0aW9ucykgcmV0dXJuO1xuXG4gICAgcmV0dXJuIGFjdGlvbnMuZ2V0Q29uc3RhbnRzKCk7XG4gIH1cblxuICBnZXRBbGxBY3Rpb25JZHMoKSB7XG4gICAgbGV0IGFjdGlvbklkcyA9IFtdO1xuXG4gICAgZm9yIChsZXQga2V5IGluIHRoaXMuX2FjdGlvbnMpIHtcbiAgICAgIGlmICghdGhpcy5fYWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgYWN0aW9uQ29uc3RhbnRzID0gdGhpcy5fYWN0aW9uc1trZXldLmdldENvbnN0YW50cygpO1xuXG4gICAgICBhY3Rpb25JZHMgPSBhY3Rpb25JZHMuY29uY2F0KGdldFZhbHVlcyhhY3Rpb25Db25zdGFudHMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uSWRzO1xuICB9XG5cbiAgZGlzcGF0Y2goYWN0aW9uSWQsIGJvZHkpIHtcbiAgICB0aGlzLl9kaXNwYXRjaCh7IGFjdGlvbklkLCBib2R5IH0pO1xuICB9XG5cbiAgZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgcHJvbWlzZSwgYWN0aW9uQXJncykge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBhY3Rpb25JZCxcbiAgICAgIGFzeW5jOiAnYmVnaW4nLFxuICAgIH07XG5cbiAgICBpZiAoYWN0aW9uQXJncykgcGF5bG9hZC5hY3Rpb25BcmdzID0gYWN0aW9uQXJncztcblxuICAgIHRoaXMuX2Rpc3BhdGNoKHBheWxvYWQpO1xuXG4gICAgcmV0dXJuIHByb21pc2VcbiAgICAgIC50aGVuKFxuICAgICAgICBib2R5ID0+IHtcbiAgICAgICAgICB0aGlzLl9kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICBhc3luYzogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gYm9keTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbklkLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICBhY3Rpb25BcmdzOiBhY3Rpb25BcmdzLFxuICAgICAgICAgICAgYXN5bmM6ICdmYWlsdXJlJyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2Rpc3BhdGNoKHBheWxvYWQpIHtcbiAgICB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2gocGF5bG9hZCk7XG4gICAgdGhpcy5lbWl0KCdkaXNwYXRjaCcsIHBheWxvYWQpO1xuICB9XG5cbiAgd2FpdEZvcih0b2tlbnNPclN0b3Jlcykge1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRva2Vuc09yU3RvcmVzKSkgdG9rZW5zT3JTdG9yZXMgPSBbdG9rZW5zT3JTdG9yZXNdO1xuXG4gICAgY29uc3QgZW5zdXJlSXNUb2tlbiA9IHRva2VuT3JTdG9yZSA9PiB7XG4gICAgICByZXR1cm4gdG9rZW5PclN0b3JlIGluc3RhbmNlb2YgU3RvcmVcbiAgICAgICAgPyB0b2tlbk9yU3RvcmUuX3Rva2VuXG4gICAgICAgIDogdG9rZW5PclN0b3JlO1xuICAgIH07XG5cbiAgICBjb25zdCB0b2tlbnMgPSB0b2tlbnNPclN0b3Jlcy5tYXAoZW5zdXJlSXNUb2tlbik7XG5cbiAgICB0aGlzLmRpc3BhdGNoZXIud2FpdEZvcih0b2tlbnMpO1xuICB9XG5cbiAgcmVtb3ZlQWxsU3RvcmVMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fc3RvcmVzKSB7XG4gICAgICBpZiAoIXRoaXMuX3N0b3Jlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLl9zdG9yZXNba2V5XTtcblxuICAgICAgc3RvcmUucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBzZXJpYWxpemUoKSB7XG4gICAgY29uc3Qgc3RhdGVUcmVlID0ge307XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fc3RvcmVzKSB7XG4gICAgICBpZiAoIXRoaXMuX3N0b3Jlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLl9zdG9yZXNba2V5XTtcblxuICAgICAgY29uc3Qgc2VyaWFsaXplID0gc3RvcmUuY29uc3RydWN0b3Iuc2VyaWFsaXplO1xuXG4gICAgICBpZiAodHlwZW9mIHNlcmlhbGl6ZSAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWRTdG9yZVN0YXRlID0gc2VyaWFsaXplKHN0b3JlLnN0YXRlKTtcblxuICAgICAgaWYgKHR5cGVvZiBzZXJpYWxpemVkU3RvcmVTdGF0ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gc3RvcmUuY29uc3RydWN0b3IubmFtZTtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBUaGUgc3RvcmUgd2l0aCBrZXkgJyR7a2V5fScgd2FzIG5vdCBzZXJpYWxpemVkIGJlY2F1c2UgdGhlIHN0YXRpYyBgXG4gICAgICAgICAgKyBgbWV0aG9kIFxcYCR7Y2xhc3NOYW1lfS5zZXJpYWxpemUoKVxcYCByZXR1cm5lZCBhIG5vbi1zdHJpbmcgd2l0aCB0eXBlIGBcbiAgICAgICAgICArIGAnJHt0eXBlb2Ygc2VyaWFsaXplZFN0b3JlU3RhdGV9Jy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZVRyZWVba2V5XSA9IHNlcmlhbGl6ZWRTdG9yZVN0YXRlO1xuXG4gICAgICBpZiAodHlwZW9mIHN0b3JlLmNvbnN0cnVjdG9yLmRlc2VyaWFsaXplICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHN0b3JlLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgVGhlIGNsYXNzIFxcYCR7Y2xhc3NOYW1lfVxcYCBoYXMgYSBcXGBzZXJpYWxpemUoKVxcYCBtZXRob2QsIGJ1dCBubyBgXG4gICAgICAgICAgKyBgY29ycmVzcG9uZGluZyBcXGBkZXNlcmlhbGl6ZSgpXFxgIG1ldGhvZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0YXRlVHJlZSk7XG4gIH1cblxuICBkZXNlcmlhbGl6ZShzZXJpYWxpemVkU3RhdGUpIHtcbiAgICBsZXQgc3RhdGVNYXA7XG5cbiAgICB0cnkge1xuICAgICAgc3RhdGVNYXAgPSBKU09OLnBhcnNlKHNlcmlhbGl6ZWRTdGF0ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIHZhbHVlIHBhc3NlZCB0byBcXGAke2NsYXNzTmFtZX0jZGVzZXJpYWxpemUoKVxcYDogYFxuICAgICAgICArIGAke3NlcmlhbGl6ZWRTdGF0ZX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQga2V5IGluIHRoaXMuX3N0b3Jlcykge1xuICAgICAgaWYgKCF0aGlzLl9zdG9yZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5fc3RvcmVzW2tleV07XG5cbiAgICAgIGNvbnN0IGRlc2VyaWFsaXplID0gc3RvcmUuY29uc3RydWN0b3IuZGVzZXJpYWxpemU7XG5cbiAgICAgIGlmICh0eXBlb2YgZGVzZXJpYWxpemUgIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBzdG9yZVN0YXRlU3RyaW5nID0gc3RhdGVNYXBba2V5XTtcbiAgICAgIGNvbnN0IHN0b3JlU3RhdGUgPSBkZXNlcmlhbGl6ZShzdG9yZVN0YXRlU3RyaW5nKTtcblxuICAgICAgc3RvcmUucmVwbGFjZVN0YXRlKHN0b3JlU3RhdGUpO1xuXG4gICAgICBpZiAodHlwZW9mIHN0b3JlLmNvbnN0cnVjdG9yLnNlcmlhbGl6ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBzdG9yZS5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYFRoZSBjbGFzcyBcXGAke2NsYXNzTmFtZX1cXGAgaGFzIGEgXFxgZGVzZXJpYWxpemUoKVxcYCBtZXRob2QsIGJ1dCBubyBgXG4gICAgICAgICAgKyBgY29ycmVzcG9uZGluZyBcXGBzZXJpYWxpemUoKVxcYCBtZXRob2QuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG4vLyBBbGlhc2VzXG5GbHV4LnByb3RvdHlwZS5nZXRDb25zdGFudHMgPSBGbHV4LnByb3RvdHlwZS5nZXRBY3Rpb25JZHM7XG5GbHV4LnByb3RvdHlwZS5nZXRBbGxDb25zdGFudHMgPSBGbHV4LnByb3RvdHlwZS5nZXRBbGxBY3Rpb25JZHM7XG5GbHV4LnByb3RvdHlwZS5kZWh5ZHJhdGUgPSBGbHV4LnByb3RvdHlwZS5zZXJpYWxpemU7XG5GbHV4LnByb3RvdHlwZS5oeWRyYXRlID0gRmx1eC5wcm90b3R5cGUuZGVzZXJpYWxpemU7XG5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShDbGFzcykge1xuICByZXR1cm4gQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLm5hbWU7XG59XG5cbmZ1bmN0aW9uIGdldFZhbHVlcyhvYmplY3QpIHtcbiAgbGV0IHZhbHVlcyA9IFtdO1xuXG4gIGZvciAobGV0IGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoIW9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcblxuICAgIHZhbHVlcy5wdXNoKG9iamVjdFtrZXldKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmNvbnN0IEZsdW1tb3ggPSBGbHV4O1xuXG5leHBvcnQge1xuICBGbHV4LFxuICBGbHVtbW94LFxuICBTdG9yZSxcbiAgQWN0aW9ucyxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9GbHV4LmpzXG4gKiovIiwiLyoqXG4gKiBTdG9yZVxuICpcbiAqIFN0b3JlcyBob2xkIGFwcGxpY2F0aW9uIHN0YXRlLiBUaGV5IHJlc3BvbmQgdG8gYWN0aW9ucyBzZW50IGJ5IHRoZSBkaXNwYXRjaGVyXG4gKiBhbmQgYnJvYWRjYXN0IGNoYW5nZSBldmVudHMgdG8gbGlzdGVuZXJzLCBzbyB0aGV5IGNhbiBncmFiIHRoZSBsYXRlc3QgZGF0YS5cbiAqIFRoZSBrZXkgdGhpbmcgdG8gcmVtZW1iZXIgaXMgdGhhdCB0aGUgb25seSB3YXkgc3RvcmVzIHJlY2VpdmUgaW5mb3JtYXRpb25cbiAqIGZyb20gdGhlIG91dHNpZGUgd29ybGQgaXMgdmlhIHRoZSBkaXNwYXRjaGVyLlxuICovXG5cbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7XG5pbXBvcnQgYXNzaWduIGZyb20gJ29iamVjdC1hc3NpZ24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG5cbiAgLyoqXG4gICAqIFN0b3JlcyBhcmUgaW5pdGlhbGl6ZWQgd2l0aCBhIHJlZmVyZW5jZVxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IG51bGw7XG5cbiAgICB0aGlzLl9oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuX2FzeW5jSGFuZGxlcnMgPSB7fTtcbiAgICB0aGlzLl9jYXRjaEFsbEhhbmRsZXJzID0gW107XG4gICAgdGhpcy5fY2F0Y2hBbGxBc3luY0hhbmRsZXJzID0ge1xuICAgICAgYmVnaW46IFtdLFxuICAgICAgc3VjY2VzczogW10sXG4gICAgICBmYWlsdXJlOiBbXSxcbiAgICB9O1xuICB9XG5cbiAgc2V0U3RhdGUobmV3U3RhdGUpIHtcbiAgICAvLyBEbyBhIHRyYW5zYWN0aW9uYWwgc3RhdGUgdXBkYXRlIGlmIGEgZnVuY3Rpb24gaXMgcGFzc2VkXG4gICAgaWYgKHR5cGVvZiBuZXdTdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3QgcHJldlN0YXRlID0gdGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoXG4gICAgICAgID8gdGhpcy5fcGVuZGluZ1N0YXRlXG4gICAgICAgIDogdGhpcy5zdGF0ZTtcblxuICAgICAgbmV3U3RhdGUgPSBuZXdTdGF0ZShwcmV2U3RhdGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2gpIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHRoaXMuX2Fzc2lnblN0YXRlKHRoaXMuX3BlbmRpbmdTdGF0ZSwgbmV3U3RhdGUpO1xuICAgICAgdGhpcy5fZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9hc3NpZ25TdGF0ZSh0aGlzLnN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICB0aGlzLmVtaXQoJ2NoYW5nZScpO1xuICAgIH1cbiAgfVxuXG4gIHJlcGxhY2VTdGF0ZShuZXdTdGF0ZSkge1xuICAgIGlmICh0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2gpIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHRoaXMuX2Fzc2lnblN0YXRlKHVuZGVmaW5lZCwgbmV3U3RhdGUpO1xuICAgICAgdGhpcy5fZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9hc3NpZ25TdGF0ZSh1bmRlZmluZWQsIG5ld1N0YXRlKTtcbiAgICAgIHRoaXMuZW1pdCgnY2hhbmdlJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdGVBc09iamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIHN0YXRpYyBhc3NpZ25TdGF0ZShvbGRTdGF0ZSwgbmV3U3RhdGUpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCBvbGRTdGF0ZSwgbmV3U3RhdGUpO1xuICB9XG5cbiAgX2Fzc2lnblN0YXRlKC4uLmFyZ3Mpe1xuICAgIHJldHVybiAodGhpcy5jb25zdHJ1Y3Rvci5hc3NpZ25TdGF0ZSB8fCBTdG9yZS5hc3NpZ25TdGF0ZSkoLi4uYXJncyk7XG4gIH1cblxuICBmb3JjZVVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faXNIYW5kbGluZ0Rpc3BhdGNoKSB7XG4gICAgICB0aGlzLl9lbWl0Q2hhbmdlQWZ0ZXJIYW5kbGluZ0Rpc3BhdGNoID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KCdjaGFuZ2UnKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlcihhY3Rpb25JZCwgaGFuZGxlcikge1xuICAgIGFjdGlvbklkID0gZW5zdXJlQWN0aW9uSWQoYWN0aW9uSWQpO1xuXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG5cbiAgICB0aGlzLl9oYW5kbGVyc1thY3Rpb25JZF0gPSBoYW5kbGVyLmJpbmQodGhpcyk7XG4gIH1cblxuICByZWdpc3RlckFzeW5jKGFjdGlvbklkLCBiZWdpbkhhbmRsZXIsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xuICAgIGFjdGlvbklkID0gZW5zdXJlQWN0aW9uSWQoYWN0aW9uSWQpO1xuXG4gICAgY29uc3QgYXN5bmNIYW5kbGVycyA9IHRoaXMuX2JpbmRBc3luY0hhbmRsZXJzKHtcbiAgICAgIGJlZ2luOiBiZWdpbkhhbmRsZXIsXG4gICAgICBzdWNjZXNzOiBzdWNjZXNzSGFuZGxlcixcbiAgICAgIGZhaWx1cmU6IGZhaWx1cmVIYW5kbGVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fYXN5bmNIYW5kbGVyc1thY3Rpb25JZF0gPSBhc3luY0hhbmRsZXJzO1xuICB9XG5cbiAgcmVnaXN0ZXJBbGwoaGFuZGxlcikge1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuXG4gICAgdGhpcy5fY2F0Y2hBbGxIYW5kbGVycy5wdXNoKGhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH1cblxuICByZWdpc3RlckFsbEFzeW5jKGJlZ2luSGFuZGxlciwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XG4gICAgY29uc3QgYXN5bmNIYW5kbGVycyA9IHRoaXMuX2JpbmRBc3luY0hhbmRsZXJzKHtcbiAgICAgIGJlZ2luOiBiZWdpbkhhbmRsZXIsXG4gICAgICBzdWNjZXNzOiBzdWNjZXNzSGFuZGxlcixcbiAgICAgIGZhaWx1cmU6IGZhaWx1cmVIYW5kbGVyLFxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmtleXMoYXN5bmNIYW5kbGVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLl9jYXRjaEFsbEFzeW5jSGFuZGxlcnNba2V5XS5wdXNoKFxuICAgICAgICBhc3luY0hhbmRsZXJzW2tleV1cbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBfYmluZEFzeW5jSGFuZGxlcnMoYXN5bmNIYW5kbGVycykge1xuICAgIGZvciAobGV0IGtleSBpbiBhc3luY0hhbmRsZXJzKSB7XG4gICAgICBpZiAoIWFzeW5jSGFuZGxlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBhc3luY0hhbmRsZXJzW2tleV07XG5cbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBhc3luY0hhbmRsZXJzW2tleV0gPSBoYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgYXN5bmNIYW5kbGVyc1trZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhc3luY0hhbmRsZXJzO1xuICB9XG5cbiAgd2FpdEZvcih0b2tlbnNPclN0b3Jlcykge1xuICAgIHRoaXMuX3dhaXRGb3IodG9rZW5zT3JTdG9yZXMpO1xuICB9XG5cbiAgaGFuZGxlcihwYXlsb2FkKSB7XG4gICAgY29uc3Qge1xuICAgICAgYm9keSxcbiAgICAgIGFjdGlvbklkLFxuICAgICAgYXN5bmM6IF9hc3luYyxcbiAgICAgIGFjdGlvbkFyZ3MsXG4gICAgICBlcnJvclxuICAgIH0gPSBwYXlsb2FkO1xuXG4gICAgY29uc3QgX2FsbEhhbmRsZXJzID0gdGhpcy5fY2F0Y2hBbGxIYW5kbGVycztcbiAgICBjb25zdCBfaGFuZGxlciA9IHRoaXMuX2hhbmRsZXJzW2FjdGlvbklkXTtcblxuICAgIGNvbnN0IF9hbGxBc3luY0hhbmRsZXJzID0gdGhpcy5fY2F0Y2hBbGxBc3luY0hhbmRsZXJzW19hc3luY107XG4gICAgY29uc3QgX2FzeW5jSGFuZGxlciA9IHRoaXMuX2FzeW5jSGFuZGxlcnNbYWN0aW9uSWRdXG4gICAgICAmJiB0aGlzLl9hc3luY0hhbmRsZXJzW2FjdGlvbklkXVtfYXN5bmNdO1xuXG4gICAgaWYgKF9hc3luYykge1xuICAgICAgbGV0IGJlZ2luT3JGYWlsdXJlSGFuZGxlcnMgPSBfYWxsQXN5bmNIYW5kbGVycy5jb25jYXQoW19hc3luY0hhbmRsZXJdKTtcblxuICAgICAgc3dpdGNoIChfYXN5bmMpIHtcbiAgICAgICAgY2FzZSAnYmVnaW4nOlxuICAgICAgICAgIHRoaXMuX3BlcmZvcm1IYW5kbGVyKGJlZ2luT3JGYWlsdXJlSGFuZGxlcnMsIGFjdGlvbkFyZ3MpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZmFpbHVyZSc6XG4gICAgICAgICAgdGhpcy5fcGVyZm9ybUhhbmRsZXIoYmVnaW5PckZhaWx1cmVIYW5kbGVycywgW2Vycm9yLmNvbmNhdChhY3Rpb25BcmdzKV0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgICAgdGhpcy5fcGVyZm9ybUhhbmRsZXIoX2FsbEFzeW5jSGFuZGxlcnMuY29uY2F0KFtcbiAgICAgICAgICAgIChfYXN5bmNIYW5kbGVyIHx8IF9oYW5kbGVyKVxuICAgICAgICAgIF0pLCBbYm9keV0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcGVyZm9ybUhhbmRsZXIoX2FsbEhhbmRsZXJzLmNvbmNhdChbX2hhbmRsZXJdKSwgW2JvZHldKTtcbiAgfVxuXG4gIF9wZXJmb3JtSGFuZGxlcihfaGFuZGxlcnMsIGFyZ3MpIHtcbiAgICB0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2ggPSB0cnVlO1xuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHRoaXMuX2Fzc2lnblN0YXRlKHVuZGVmaW5lZCwgdGhpcy5zdGF0ZSk7XG4gICAgdGhpcy5fZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCA9IGZhbHNlO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX3BlcmZvcm1IYW5kbGVycyhfaGFuZGxlcnMsIGFyZ3MpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAodGhpcy5fZW1pdENoYW5nZUFmdGVySGFuZGxpbmdEaXNwYXRjaCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5fcGVuZGluZ1N0YXRlO1xuICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc0hhbmRsaW5nRGlzcGF0Y2ggPSBmYWxzZTtcbiAgICAgIHRoaXMuX3BlbmRpbmdTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2VtaXRDaGFuZ2VBZnRlckhhbmRsaW5nRGlzcGF0Y2ggPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfcGVyZm9ybUhhbmRsZXJzKF9oYW5kbGVycywgYXJncykge1xuICAgIF9oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKF9oYW5kbGVyKSB7XG4gICAgICBpZiAodHlwZW9mIF9oYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG4gICAgICBfaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuc3VyZUFjdGlvbklkKGFjdGlvbk9yQWN0aW9uSWQpIHtcbiAgcmV0dXJuIHR5cGVvZiBhY3Rpb25PckFjdGlvbklkID09PSAnZnVuY3Rpb24nXG4gICAgPyBhY3Rpb25PckFjdGlvbklkLl9pZFxuICAgIDogYWN0aW9uT3JBY3Rpb25JZDtcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL1N0b3JlLmpzXG4gKiovIiwiLyoqXG4gKiBBY3Rpb25zXG4gKlxuICogSW5zdGFuY2VzIG9mIHRoZSBBY3Rpb25zIGNsYXNzIHJlcHJlc2VudCBhIHNldCBvZiBhY3Rpb25zLiAoSW4gRmx1eCBwYXJsYW5jZSxcbiAqIHRoZXNlIG1pZ2h0IGJlIG1vcmUgYWNjdXJhdGVseSBkZW5vdGVkIGFzIEFjdGlvbiBDcmVhdG9ycywgd2hpbGUgQWN0aW9uXG4gKiByZWZlcnMgdG8gdGhlIHBheWxvYWQgc2VudCB0byB0aGUgZGlzcGF0Y2hlciwgYnV0IHRoaXMgaXMuLi4gY29uZnVzaW5nLiBXZVxuICogd2lsbCB1c2UgQWN0aW9uIHRvIG1lYW4gdGhlIGZ1bmN0aW9uIHlvdSBjYWxsIHRvIHRyaWdnZXIgYSBkaXNwYXRjaC4pXG4gKlxuICogQ3JlYXRlIGFjdGlvbnMgYnkgZXh0ZW5kaW5nIGZyb20gdGhlIGJhc2UgQWN0aW9ucyBjbGFzcyBhbmQgYWRkaW5nIG1ldGhvZHMuXG4gKiBBbGwgbWV0aG9kcyBvbiB0aGUgcHJvdG90eXBlIChleGNlcHQgdGhlIGNvbnN0cnVjdG9yKSB3aWxsIGJlXG4gKiBjb252ZXJ0ZWQgaW50byBhY3Rpb25zLiBUaGUgcmV0dXJuIHZhbHVlIG9mIGFuIGFjdGlvbiBpcyB1c2VkIGFzIHRoZSBib2R5XG4gKiBvZiB0aGUgcGF5bG9hZCBzZW50IHRvIHRoZSBkaXNwYXRjaGVyLlxuICovXG5cbmltcG9ydCB1bmlxdWVJZCBmcm9tICd1bmlxdWVpZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjdGlvbnMge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgdGhpcy5fYmFzZUlkID0gdW5pcXVlSWQoKTtcblxuICAgIGNvbnN0IG1ldGhvZE5hbWVzID0gdGhpcy5fZ2V0QWN0aW9uTWV0aG9kTmFtZXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1ldGhvZE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBtZXRob2ROYW1lID0gbWV0aG9kTmFtZXNbaV07XG4gICAgICB0aGlzLl93cmFwQWN0aW9uKG1ldGhvZE5hbWUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0Q29uc3RhbnRzID0gdGhpcy5nZXRBY3Rpb25JZHM7XG4gIH1cblxuICBnZXRBY3Rpb25JZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEFjdGlvbk1ldGhvZE5hbWVzKCkucmVkdWNlKChyZXN1bHQsIGFjdGlvbk5hbWUpID0+IHtcbiAgICAgIHJlc3VsdFthY3Rpb25OYW1lXSA9IHRoaXNbYWN0aW9uTmFtZV0uX2lkO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICBfZ2V0QWN0aW9uTWV0aG9kTmFtZXMoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpXG4gICAgICAuZmlsdGVyKG5hbWUgPT5cbiAgICAgICAgbmFtZSAhPT0gJ2NvbnN0cnVjdG9yJyAmJlxuICAgICAgICB0eXBlb2YgdGhpc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgKTtcbiAgfVxuXG4gIF93cmFwQWN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IHRoaXNbbWV0aG9kTmFtZV07XG4gICAgY29uc3QgYWN0aW9uSWQgPSB0aGlzLl9jcmVhdGVBY3Rpb25JZChtZXRob2ROYW1lKTtcblxuICAgIGNvbnN0IGFjdGlvbiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zdCBib2R5ID0gb3JpZ2luYWxNZXRob2QuYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICAgIGlmIChpc1Byb21pc2UoYm9keSkpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IGJvZHk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIHByb21pc2UsIGFyZ3MsIG1ldGhvZE5hbWUpXG4gICAgICAgICAgLy8gQ2F0Y2ggZXJyb3JzIGFuZCBkbyBub3RoaW5nXG4gICAgICAgICAgLy8gVGhleSBjYW4gYmUgaGFuZGxlZCBieSBzdG9yZSBvciBjYWxsZXJcbiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge30pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goYWN0aW9uSWQsIGJvZHksIGFyZ3MsIG1ldGhvZE5hbWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgbWV0aG9kJ3MgcmV0dXJuIHZhbHVlIHRvIGNhbGxlclxuICAgICAgcmV0dXJuIGJvZHk7XG4gICAgfTtcblxuICAgIGFjdGlvbi5faWQgPSBhY3Rpb25JZDtcblxuICAgIHRoaXNbbWV0aG9kTmFtZV0gPSBhY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHVuaXF1ZSBzdHJpbmcgY29uc3RhbnQgZm9yIGFuIGFjdGlvbiBtZXRob2QsIHVzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIC0gTmFtZSBvZiB0aGUgYWN0aW9uIG1ldGhvZFxuICAgKi9cbiAgX2NyZWF0ZUFjdGlvbklkKG1ldGhvZE5hbWUpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5fYmFzZUlkfS0ke21ldGhvZE5hbWV9YDtcbiAgfVxuXG4gIF9kaXNwYXRjaChhY3Rpb25JZCwgYm9keSwgYXJncywgbWV0aG9kTmFtZSkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaXNwYXRjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBib2R5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmRpc3BhdGNoKGFjdGlvbklkLCBib2R5LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBZb3UndmUgYXR0ZW1wdGVkIHRvIHBlcmZvcm0gdGhlIGFjdGlvbiBgXG4gICAgICAgICsgYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSMke21ldGhvZE5hbWV9LCBidXQgaXQgaGFzbid0IGJlZW4gYWRkZWQgYFxuICAgICAgICArIGB0byBhIEZsdXggaW5zdGFuY2UuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBib2R5O1xuICB9XG5cbiAgX2Rpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIHByb21pc2UsIGFyZ3MsIG1ldGhvZE5hbWUpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlzcGF0Y2hBc3luYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgcHJvbWlzZSwgYXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgWW91J3ZlIGF0dGVtcHRlZCB0byBwZXJmb3JtIHRoZSBhc3luY2hyb25vdXMgYWN0aW9uIGBcbiAgICAgICAgKyBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IyR7bWV0aG9kTmFtZX0sIGJ1dCBpdCBoYXNuJ3QgYmVlbiBhZGRlZCBgXG4gICAgICAgICsgYHRvIGEgRmx1eCBpbnN0YW5jZS5gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICB9XG5cbn1cblxuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL0FjdGlvbnMuanNcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbm1vZHVsZS5leHBvcnRzLkRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2xpYi9EaXNwYXRjaGVyJylcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2ZsdXgvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgRXZlbnRFbWl0dGVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEV2ZW50IGhhbmRsZXIgdG8gYmUgY2FsbGVkLlxuICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBDb250ZXh0IGZvciBmdW5jdGlvbiBleGVjdXRpb24uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSBlbWl0IG9uY2VcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuICB0aGlzLmZuID0gZm47XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogTWluaW1hbCBFdmVudEVtaXR0ZXIgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcbiAqIEV2ZW50RW1pdHRlciBpbnRlcmZhY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7IC8qIE5vdGhpbmcgdG8gc2V0ICovIH1cblxuLyoqXG4gKiBIb2xkcyB0aGUgYXNzaWduZWQgRXZlbnRFbWl0dGVycyBieSBuYW1lLlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5cbi8qKlxuICogUmV0dXJuIGEgbGlzdCBvZiBhc3NpZ25lZCBldmVudCBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudHMgdGhhdCBzaG91bGQgYmUgbGlzdGVkLlxuICogQHJldHVybnMge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1tldmVudF0pIHJldHVybiBbXTtcbiAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF0uZm4pIHJldHVybiBbdGhpcy5fZXZlbnRzW2V2ZW50XS5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl9ldmVudHNbZXZlbnRdLmxlbmd0aCwgZWUgPSBuZXcgQXJyYXkobCk7IGkgPCBsOyBpKyspIHtcbiAgICBlZVtpXSA9IHRoaXMuX2V2ZW50c1tldmVudF1baV0uZm47XG4gIH1cblxuICByZXR1cm4gZWU7XG59O1xuXG4vKipcbiAqIEVtaXQgYW4gZXZlbnQgdG8gYWxsIHJlZ2lzdGVyZWQgZXZlbnQgbGlzdGVuZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGlvbiBpZiB3ZSd2ZSBlbWl0dGVkIGFuIGV2ZW50LlxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbZXZlbnRdKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldmVudF1cbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGFyZ3NcbiAgICAsIGk7XG5cbiAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB0cnVlKTtcblxuICAgICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIG5ldyBFdmVudExpc3RlbmVyIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50LlxuICogQHBhcmFtIHtGdW5jdG9ufSBmbiBDYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7TWl4ZWR9IGNvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgdGhpcyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpIHRoaXMuX2V2ZW50cyA9IHt9O1xuICBpZiAoIXRoaXMuX2V2ZW50c1tldmVudF0pIHRoaXMuX2V2ZW50c1tldmVudF0gPSBsaXN0ZW5lcjtcbiAgZWxzZSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNbZXZlbnRdLmZuKSB0aGlzLl9ldmVudHNbZXZlbnRdLnB1c2gobGlzdGVuZXIpO1xuICAgIGVsc2UgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0sIGxpc3RlbmVyXG4gICAgXTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gRXZlbnRMaXN0ZW5lciB0aGF0J3Mgb25seSBjYWxsZWQgb25jZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgTmFtZSBvZiB0aGUgZXZlbnQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBDYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7TWl4ZWR9IGNvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IHRoaXMsIHRydWUpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSB7fTtcbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZlbnRdKSB0aGlzLl9ldmVudHNbZXZlbnRdID0gbGlzdGVuZXI7XG4gIGVsc2Uge1xuICAgIGlmICghdGhpcy5fZXZlbnRzW2V2ZW50XS5mbikgdGhpcy5fZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgICBlbHNlIHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXG4gICAgICB0aGlzLl9ldmVudHNbZXZlbnRdLCBsaXN0ZW5lclxuICAgIF07XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHdlIHdhbnQgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIHRoYXQgd2UgbmVlZCB0byBmaW5kLlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uY2UgbGlzdGVuZXJzLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgb25jZSkge1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW2V2ZW50XSkgcmV0dXJuIHRoaXM7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldmVudF1cbiAgICAsIGV2ZW50cyA9IFtdO1xuXG4gIGlmIChmbikge1xuICAgIGlmIChsaXN0ZW5lcnMuZm4gJiYgKGxpc3RlbmVycy5mbiAhPT0gZm4gfHwgKG9uY2UgJiYgIWxpc3RlbmVycy5vbmNlKSkpIHtcbiAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVycyk7XG4gICAgfVxuICAgIGlmICghbGlzdGVuZXJzLmZuKSBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fCAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxuICAvL1xuICBpZiAoZXZlbnRzLmxlbmd0aCkge1xuICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBldmVudHMubGVuZ3RoID09PSAxID8gZXZlbnRzWzBdIDogZXZlbnRzO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzIG9yIG9ubHkgdGhlIGxpc3RlbmVycyBmb3IgdGhlIHNwZWNpZmllZCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHdhbnQgdG8gcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuXG4gIGlmIChldmVudCkgZGVsZXRlIHRoaXMuX2V2ZW50c1tldmVudF07XG4gIGVsc2UgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIFRoaXMgZnVuY3Rpb24gZG9lc24ndCBhcHBseSBhbnltb3JlLlxuLy9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlcjIgPSBFdmVudEVtaXR0ZXI7XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyMyA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXZlbnRlbWl0dGVyMy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRGlzcGF0Y2hlclxuICogQHR5cGVjaGVja3NcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbnZhciBfbGFzdElEID0gMTtcbnZhciBfcHJlZml4ID0gJ0lEXyc7XG5cbi8qKlxuICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG4gKlxuICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG4gKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAqICAgMikgQ2FsbGJhY2tzIGNhbiBiZSBkZWZlcnJlZCBpbiB3aG9sZSBvciBwYXJ0IHVudGlsIG90aGVyIGNhbGxiYWNrcyBoYXZlXG4gKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoaXMgaHlwb3RoZXRpY2FsIGZsaWdodCBkZXN0aW5hdGlvbiBmb3JtLCB3aGljaFxuICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcbiAqXG4gKiAgIHZhciBmbGlnaHREaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENvdW50cnlTdG9yZSA9IHtjb3VudHJ5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENpdHlTdG9yZSA9IHtjaXR5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuICogICB2YXIgRmxpZ2h0UHJpY2VTdG9yZSA9IHtwcmljZTogbnVsbH1cbiAqXG4gKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDaXR5OiAncGFyaXMnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBgQ2l0eVN0b3JlYDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjaXR5LXVwZGF0ZScpIHtcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDb3VudHJ5OiAnYXVzdHJhbGlhJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYm90aCBzdG9yZXM6XG4gKlxuICogICAgQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY291bnRyeS11cGRhdGUnKSB7XG4gKiAgICAgICBDb3VudHJ5U3RvcmUuY291bnRyeSA9IHBheWxvYWQuc2VsZWN0ZWRDb3VudHJ5O1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogV2hlbiB0aGUgY2FsbGJhY2sgdG8gdXBkYXRlIGBDb3VudHJ5U3RvcmVgIGlzIHJlZ2lzdGVyZWQsIHdlIHNhdmUgYSByZWZlcmVuY2VcbiAqIHRvIHRoZSByZXR1cm5lZCB0b2tlbi4gVXNpbmcgdGhpcyB0b2tlbiB3aXRoIGB3YWl0Rm9yKClgLCB3ZSBjYW4gZ3VhcmFudGVlXG4gKiB0aGF0IGBDb3VudHJ5U3RvcmVgIGlzIHVwZGF0ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayB0aGF0IHVwZGF0ZXMgYENpdHlTdG9yZWBcbiAqIG5lZWRzIHRvIHF1ZXJ5IGl0cyBkYXRhLlxuICpcbiAqICAgQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY291bnRyeS11cGRhdGUnKSB7XG4gKiAgICAgICAvLyBgQ291bnRyeVN0b3JlLmNvdW50cnlgIG1heSBub3QgYmUgdXBkYXRlZC5cbiAqICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgaXMgbm93IGd1YXJhbnRlZWQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiAgICAgICAvLyBTZWxlY3QgdGhlIGRlZmF1bHQgY2l0eSBmb3IgdGhlIG5ldyBjb3VudHJ5XG4gKiAgICAgICBDaXR5U3RvcmUuY2l0eSA9IGdldERlZmF1bHRDaXR5Rm9yQ291bnRyeShDb3VudHJ5U3RvcmUuY291bnRyeSk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgdXNhZ2Ugb2YgYHdhaXRGb3IoKWAgY2FuIGJlIGNoYWluZWQsIGZvciBleGFtcGxlOlxuICpcbiAqICAgRmxpZ2h0UHJpY2VTdG9yZS5kaXNwYXRjaFRva2VuID1cbiAqICAgICBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb25UeXBlKSB7XG4gKiAgICAgICAgIGNhc2UgJ2NvdW50cnktdXBkYXRlJzpcbiAqICAgICAgICAgICBmbGlnaHREaXNwYXRjaGVyLndhaXRGb3IoW0NpdHlTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG4gKiAgICAgICAgICAgICBnZXRGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG4gKiAgICAgICAgICAgYnJlYWs7XG4gKlxuICogICAgICAgICBjYXNlICdjaXR5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG4gKiAgICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG4gKiAgICAgICAgICAgYnJlYWs7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgYGNvdW50cnktdXBkYXRlYCBwYXlsb2FkIHdpbGwgYmUgZ3VhcmFudGVlZCB0byBpbnZva2UgdGhlIHN0b3JlcydcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIG9yZGVyOiBgQ291bnRyeVN0b3JlYCwgYENpdHlTdG9yZWAsIHRoZW5cbiAqIGBGbGlnaHRQcmljZVN0b3JlYC5cbiAqL1xuXG4gIGZ1bmN0aW9uIERpc3BhdGNoZXIoKSB7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3MgPSB7fTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZyA9IHt9O1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkID0ge307XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aXRoIGV2ZXJ5IGRpc3BhdGNoZWQgcGF5bG9hZC4gUmV0dXJuc1xuICAgKiBhIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgd2FpdEZvcigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBfcHJlZml4ICsgX2xhc3RJRCsrO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGJhc2VkIG9uIGl0cyB0b2tlbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGlkKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdLFxuICAgICAgJ0Rpc3BhdGNoZXIudW5yZWdpc3RlciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcbiAgICAgIGlkXG4gICAgKTtcbiAgICBkZWxldGUgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYWl0cyBmb3IgdGhlIGNhbGxiYWNrcyBzcGVjaWZpZWQgdG8gYmUgaW52b2tlZCBiZWZvcmUgY29udGludWluZyBleGVjdXRpb25cbiAgICogb2YgdGhlIGN1cnJlbnQgY2FsbGJhY2suIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgYSBjYWxsYmFjayBpblxuICAgKiByZXNwb25zZSB0byBhIGRpc3BhdGNoZWQgcGF5bG9hZC5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBpZHNcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLndhaXRGb3I9ZnVuY3Rpb24oaWRzKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nLFxuICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJ1xuICAgICk7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGlkcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgIHZhciBpZCA9IGlkc1tpaV07XG4gICAgICBpZiAodGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgIGludmFyaWFudChcbiAgICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0sXG4gICAgICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIHdoaWxlICcgK1xuICAgICAgICAgICd3YWl0aW5nIGZvciBgJXNgLicsXG4gICAgICAgICAgaWRcbiAgICAgICAgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSxcbiAgICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcbiAgICAgICAgaWRcbiAgICAgICk7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBwYXlsb2FkIHRvIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWRcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nLFxuICAgICAgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJ1xuICAgICk7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9zdGFydERpc3BhdGNoaW5nKHBheWxvYWQpO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjayhpZCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaXNEaXNwYXRjaGluZz1mdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBjYWxsYmFjayBzdG9yZWQgd2l0aCB0aGUgZ2l2ZW4gaWQuIEFsc28gZG8gc29tZSBpbnRlcm5hbFxuICAgKiBib29ra2VlcGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2s9ZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0gPSB0cnVlO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSh0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkKTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0gPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdXAgYm9va2tlZXBpbmcgbmVlZGVkIHdoZW4gZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZz1mdW5jdGlvbihwYXlsb2FkKSB7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3MpIHtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSA9IGZhbHNlO1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBwYXlsb2FkO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFyIGJvb2trZWVwaW5nIHVzZWQgZm9yIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLiREaXNwYXRjaGVyX3N0b3BEaXNwYXRjaGluZz1mdW5jdGlvbigpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gbnVsbDtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgfTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IERpc3BhdGNoZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9mbHV4L2xpYi9EaXNwYXRjaGVyLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBUb09iamVjdCh2YWwpIHtcblx0aWYgKHZhbCA9PSBudWxsKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHR2YXIgZnJvbTtcblx0dmFyIGtleXM7XG5cdHZhciB0byA9IFRvT2JqZWN0KHRhcmdldCk7XG5cblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRmcm9tID0gYXJndW1lbnRzW3NdO1xuXHRcdGtleXMgPSBPYmplY3Qua2V5cyhPYmplY3QoZnJvbSkpO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L29iamVjdC1hc3NpZ24vaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIGNvdW50ID0gMDtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHVuaXF1ZSBJRC5cbiAqXG4gKiBPcHRpb25hbGx5IHBhc3MgYSBwcmVmaXggdG8gcHJlcGVuZCwgYSBzdWZmaXggdG8gYXBwZW5kLCBvciBhXG4gKiBtdWx0aXBsaWVyIHRvIHVzZSBvbiB0aGUgSUQuXG4gKlxuICogYGBganNcbiAqIHVuaXF1ZUlkKCk7IC8vPT4gJzI1J1xuICpcbiAqIHVuaXF1ZUlkKHtwcmVmaXg6ICdhcHBsZV8nfSk7XG4gKiAvLz0+ICdhcHBsZV8xMCdcbiAqXG4gKiB1bmlxdWVJZCh7c3VmZml4OiAnX29yYW5nZSd9KTtcbiAqIC8vPT4gJzEwX29yYW5nZSdcbiAqXG4gKiB1bmlxdWVJZCh7bXVsdGlwbGllcjogNX0pO1xuICogLy89PiA1LCAxMCwgMTUsIDIwLi4uXG4gKiBgYGBcbiAqXG4gKiBUbyByZXNldCB0aGUgYGlkYCB0byB6ZXJvLCBkbyBgaWQucmVzZXQoKWAuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBgb3B0aW9uc2AgT3B0aW9uYWxseSBwYXNzIGEgYHByZWZpeGAsIGBzdWZmaXhgIGFuZC9vciBgbXVsdGlwbGllci5cbiAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHVuaXF1ZSBpZC5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxudmFyIGlkID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXg7XG4gIHZhciBzdWZmaXggPSBvcHRpb25zLnN1ZmZpeDtcblxuICB2YXIgaWQgPSArK2NvdW50ICogKG9wdGlvbnMubXVsdGlwbGllciB8fCAxKTtcblxuICBpZiAocHJlZml4ID09IG51bGwpIHtcbiAgICBwcmVmaXggPSAnJztcbiAgfVxuXG4gIGlmIChzdWZmaXggPT0gbnVsbCkge1xuICAgIHN1ZmZpeCA9ICcnO1xuICB9XG5cbiAgcmV0dXJuIFN0cmluZyhwcmVmaXgpICsgaWQgKyBTdHJpbmcoc3VmZml4KTtcbn07XG5cblxuaWQucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGNvdW50ID0gMDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdW5pcXVlaWQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIGludmFyaWFudCA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChmYWxzZSkge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdJbnZhcmlhbnQgVmlvbGF0aW9uOiAnICtcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2ZsdXgvbGliL2ludmFyaWFudC5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=