{"version":3,"sources":["../../src/addons/FluxComponent.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiDO,KAAK,2BAAM,cAAc;;qCACkB,yBAAyB;;IAAlE,eAAe,0BAAf,eAAe;IAAE,gBAAgB,0BAAhB,gBAAgB;;IACnC,MAAM,2BAAM,eAAe;;IAE5B,aAAa;AACN,WADP,aAAa,CACL,KAAK,EAAE,OAAO,EAAE;0BADxB,aAAa;;AAEf,+BAFE,aAAa,6CAET,KAAK,EAAE,OAAO,EAAE;;AAEtB,QAAI,CAAC,UAAU,EAAE,CAAC;;AAElB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC;;AAE5E,QAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC5C;;YATG,aAAa;;eAAb,aAAa;AAWjB,aAAS;aAAA,mBAAC,KAAK,EAAE;AACf,eAAO,KAAK,CAAC,MAAM,CAAC,cAAc,CAChC,KAAK,EACL,IAAI,CAAC,aAAa,EAAE,CACrB,CAAC;OACH;;AAED,iBAAa;aAAA,yBAAG;qBAOM,IAAI,CAAC,KAAK;YAL5B,QAAQ,UAAR,QAAQ;YACR,MAAM,UAAN,MAAM;YACN,eAAe,UAAf,eAAe;YACf,WAAW,UAAX,WAAW;YACX,IAAI,UAAJ,IAAI;;YACD,UAAU;;AAEf,eAAO,MAAM,CACX,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,EACxB,IAAI,CAAC,KAAK,EACV,UAAU,CACX,CAAC;OACH;;AAED,UAAM;aAAA,kBAAG;qBACsB,IAAI,CAAC,KAAK;YAA/B,QAAQ,UAAR,QAAQ;YAAE,MAAM,UAAN,MAAM;;AAExB,YAAI,OAAO,MAAM,KAAK,UAAU,EAAE;AAChC,iBAAO,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;SACrD;;AAED,YAAI,CAAC,QAAQ;AAAE,iBAAO,IAAI,CAAC;SAAA,AAE3B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC5B,cAAM,KAAK,GAAG,QAAQ,CAAC;AACvB,iBAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC9B,MAAM;AACL,iBAAO;;;YAAO,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC;WAAQ,CAAC;SACpE;OACF;;;;SAjDG,aAAa;GAAS,KAAK,CAAC,SAAS;;AAoD3C,MAAM,CACJ,aAAa,CAAC,SAAS,EACvB,eAAe,CAChB,CAAC;;AAEF,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;;iBAEzB,aAAa","file":"src/addons/FluxComponent.js","sourcesContent":["/**\n * Flux Component\n *\n * Component form of fluxMixin. Uses fluxMixin as part of its implementation,\n * so requires a flux instance to be provided as either context or a prop.\n *\n * Like fluxMixin, children are given access to the flux instance via\n * `context.flux`. Use this near the top of your app hierarchy and all children\n * will have easy access to the flux instance (including, of course, other\n * Flux components!):\n *\n * <FluxComponent flux={flux}>\n *    ...the rest of your app\n * </FluxComponent>\n *\n * Now any child can access the flux instance again like this:\n *\n * <FluxComponent>\n *    ...children\n * </FluxComponent>\n *\n * We don't need the flux prop this time because flux is already part of\n * the context.\n *\n * Additionally, immediate children are given a `flux` prop.\n *\n * The component has an optional prop `connectToStores`, which is -- you guessed\n * it -- passed directly to fluxMixin's `connectToStores()` function and\n * set as the initial state. The component's state is injected as props to\n * child components.\n *\n * The practical upshot of all this is that fluxMixin, state changes, and\n * context are now simply implementation details. Among other things, this means\n * you can write your components as plain ES6 classes. Here's an example:\n *\n * class ParentComponent extends React.Component {\n *\n *   render() {\n *     <FluxComponent connectToStores=\"fooStore\">\n *       <ChildComponent />\n *     </FluxComponent>\n *   }\n *\n * }\n *\n * ChildComponent in this example has prop `flux` containing the flux instance,\n * and props that sync with each of the state keys of fooStore.\n */\n\nimport React from 'react/addons';\nimport { instanceMethods, staticProperties } from './reactComponentMethods';\nimport assign from 'object-assign';\n\nclass FluxComponent extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.initialize();\n\n    this.state = this.connectToStores(props.connectToStores, props.stateGetter);\n\n    this.wrapChild = this.wrapChild.bind(this);\n  }\n\n  wrapChild(child) {\n    return React.addons.cloneWithProps(\n      child,\n      this.getChildProps()\n    );\n  }\n\n  getChildProps() {\n    const {\n      children,\n      render,\n      connectToStores,\n      stateGetter,\n      flux,\n      ...extraProps } = this.props;\n\n    return assign(\n      { flux: this.getFlux() },\n      this.state,\n      extraProps\n    );\n  }\n\n  render() {\n    const { children, render } = this.props;\n\n    if (typeof render === 'function') {\n      return render(this.getChildProps(), this.getFlux());\n    }\n\n    if (!children) return null;\n\n    if (!Array.isArray(children)) {\n      const child = children;\n      return this.wrapChild(child);\n    } else {\n      return <span>{React.Children.map(children, this.wrapChild)}</span>;\n    }\n  }\n}\n\nassign(\n  FluxComponent.prototype,\n  instanceMethods\n);\n\nassign(FluxComponent, staticProperties);\n\nexport default FluxComponent;\n"]}